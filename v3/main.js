(function(){var Ab=Object.create||function(a){return{__proto__:a}};function md(a,b){a.prototype=Ab(b.prototype),a.prototype.constructor=a}var nd=Math.imul||function(a,b){return (a*(b>>>16)<<16)+a*(b&65535)|0};var ma;function bb(a,b){var c=URL.createObjectURL(new Blob([b])),d=G.createElement('a');G.body.appendChild(d),d.download=a,d.href=c,d.click(),G.body.removeChild(d),setTimeout(function(){URL.revokeObjectURL(c)},1000)}function Ld(){var a=new XMLHttpRequest;a.open('GET','level.lvl'),a.responseType='arraybuffer',a.onload=function(){yc(new Uint8Array(a.response))},a.send()}function yc(a){var b=null;try{b=new ud}catch(ta){throw ta}finally{b||alert('Could not initialize WebGL')}var c=G.body,d=b.k.canvas,e=d.style,f=new od(b,a),h={},g=wb(),i=function(){var j=innerWidth,m=innerHeight,l=devicePixelRatio;Lb(b,Math.round(j*l)|0,Math.round(m*l)|0)},k=function(){var o=wb(),r=(H(h,39,0)|H(h,68,0))-(H(h,37,0)|H(h,65,0))|0,q=(H(h,40,0)|H(h,83,0))-(H(h,38,0)|H(h,87,0))|0;F(f.o.a,r,0,q),f.z=Vc(Oa),Xb(f,(o-g)/1000),Wb(f),g=o,
requestAnimationFrame(k)},u=function(p){W(p),f.o.b=Pa(p.touches).length!=0,Yc(d)},t=function(D,B){W(D),Sb(f,B,D.shiftKey)},x=null,J=function(Y){x&&x.parentNode.removeChild(x),x=G.createElement('input'),x.type='file',w(x,'change',function(R){var ga=Pa(x.files);if(ga.length==1){var Z=new FileReader;Z.onload=function(){Y(new Uint8Array(Z.result))},Z.readAsArrayBuffer(ga[0])}}),c.appendChild(x),x.click()};e.position='fixed',e.left=e.top='0',e.width=e.height='100%',c.appendChild(d),w(G,'keydown',function(A){var z=A.which,Qa=A.shiftKey;h[z]=1,!A.ctrlKey&&!A.metaKey?z>64&&z<91?t(A,z-58|0):z>47&&z<58?t(A,z-15|0):z==8||z==49?t(A,0):z^37?z^38?z^39?z^40||t(A,6):t(A,5):t(A,4):t(A,3):(z^79?z^83?z^89?z^90||t(A,Qa?2:1):t(A,2):(W(A),Yb(f)):(W(A),J(function(ja){sb(f.f,new td.fb(ja),0)})),h={})}),w(G,'keyup',function(Xa){h[Xa.which]=0}),w(Oa,'blur',function(sa){h={},f.o.c=!1}),w(G,'mousedown',function(Ya){W(Ya),xb(G)!=d?Zc(d):f.o.c=!0}),w(G,'mouseup',function(zb){f.o.c=!1}),w(G,'mousemove',function(aa){xb(G)==d&&Vb(f,Wc(aa),Xc(aa))}),
w(G,'touchstart',u),w(G,'touchmove',u),w(G,'touchend',u),w(G,'touchcancel',u),w(Oa,'devicemotion',function(Za){var O=Za.rotationRate,ya=O?O.alpha:null,ba=O?O.beta:null,za=O?O.gamma:null;ya!==null&&ba!==null&&za!==null&&Ub(f,ya,ba,za)}),w(Oa,'deviceorientation',function(Aa){var ka=Aa.alpha,la=Aa.beta,Ba=Aa.gamma;ka!==null&&la!==null&&Ba!==null&&Tb(f,ka,la,Ba)}),w(Oa,'resize',function(){i()}),i(),k()}function Sb(d,a,b){if(a^22)d.j.Ib(a,b);else{var c=d.j.Ra();d.j=d.j instanceof jd?d.g:d.i,d.j.Hb(c),d.h.style.display=d.j instanceof kd?'none':'block'}}function Tb(d,a,b,c){d.D=a,d.x=b,d.Y=c,d.ga=!0}function Ub(d,a,b,c){d.B=a,d.J=b,d.R=c}function Vb(c,a,b){c.A+=a*.005,c.A-=Math.floor(c.A/6.283185307179586)*6.283185307179586,c.Z=Ob(c.Z+b*.005,-1.5707963267948966,1.5707963267948966)}function Wb(a){a.k=a.z==0?a.m:a.l||(a.l=new Hd(a.a,a,a.b)),a.k.Gb()}function va(e,a,b,c){var d=e.j.Ra();E(E(E(E(Ga(e.q),Ia(ea,a^1?a^2?0:-.1:.1,0,0)),Ia(ea,0,0,-10)),e.t),Ia(ea,-d.a,-d.b,-d.c)),Va(c,'y',e.c,0),Va(c,'x',e.d,1),Ua(c,'t',e.q),Ua(c,
'u',b),$(c,'g',e.t.i,e.t.j,e.t.m,d.a*e.t.i+d.b*e.t.j+d.c*e.t.m+10-3),F(e.p,d.a+e.t.i*10,d.b+e.t.j*10,d.c+e.t.m*10),e.j.Jb(e.e),Pc(e.f,c,e.p,e.t),xc(e.e,c)}function Xb(b,a){b.ga?(b.D+=b.B*a,b.x+=b.J*a,b.Y+=b.R*a,E(E(E(E(E(Ga(b.t),Q(ea,0,0,1,b.z*.017453292519943295)),Q(ea,0,1,0,-b.Y*.017453292519943295)),Q(ea,1,0,0,-b.x*.017453292519943295)),Q(ea,0,0,1,-b.D*.017453292519943295)),Q(ea,1,0,0,1.5707963267948966))):E(E(Ga(b.t),Q(ea,1,0,0,b.Z)),Q(ea,0,1,0,b.A)),b.j.Kb(b.o,b.t,a),b.r=b.r*.9+.1/a,Oa.top.document.title=b.r.toFixed(1)+'fps'}function Yb(a){bb('level.lvl',ca(Qc(a.f))),bb('lightmap.png',Fc(a.f.d))}function oa(h,a,b){if(!b.length)return null;for(var c=a.b,g=0,i=h.b,j=i.length;g<j;g=g+1|0){var d=i[g],e=cb(d,c,b);if(e)return e}var f=new qd(h,new Bd(h.a,1<<22));return h.b.push(f),cb(f,c,b)}function cb(j,a,b){var c=b.length,d=j.c,e=null;if((j.d+c|0)<=1<<22){for(;d.length&&$a(d).e;)d.pop();if(d.length){var f=$a(d),h=Ca(f.d+f.b|0,a);(h+c|0)<=1<<22&&(e=new rd(j,c,a,h))}if(!e){var g=0;Pb(d,function(i){return i.e?!0:(g=Ca(g,
a),i.d^g&&(Mb(j.b,i.d,g,i.b),i.d=g,g=g+i.b|0),!1)}),g=Ca(g,a),(g+c|0)<=1<<22&&(e=new rd(j,c,a,g))}e&&(Nb(j.b,b,e.d),j.d=j.d+c|0,d.push(e))}return e}function Ca(a,b){return a+((b-(a%b|0)|0)%b|0)|0}function Da(a){var b;a.e||(a.e=!0,(b=a.a).d=b.d-a.b|0)}function da(d,a,b,c){return d.a.push(new Dd(a,b,c,d.b)),d.b=d.b+nd(c,b?1:4)|0,d}function _(f,a,b,c,d,e){f.d=a|b<<8|c<<16|d<<24,f.b=e}function wa(f,a,b,c,d){var e=f.h?f.h.a:f.g;e[0]=a,e[1]=b,e[2]=c,e[3]=d}function ha(e,a,b,c,d){c&&(hb(e),lc(b),mc(c.a.b),fc(e,b.b),dc(e,d),ib(e),ec(e),e.k.drawArrays(a^2?a?4:1:5,c.d/c.c|0,c.b/c.c|0),e.m=!1)}function dc(b,a){a==1&&!b.f?(b.f=!0,b.k.enable(2884)):!a&&b.f&&(b.f=!1,b.k.disable(2884))}function Lb(d,a,b){if(d.B^a||d.o^b){var c=d.k.canvas;c.width=a,c.height=b,wa(d,0,0,a,b),d.B=a,d.o=b}}function Sa(b,a){hb(b),ib(b),b.k.clear((a^2?16384:0)|(a^1?1280:0))}function xa(e,a,b,c){var d=new Ad(e,a,b,c);return Ea(d),d}function Ta(i,a,b){var c=new Cd(i,a,1,1,null);return gc(i,b,function(d,e,f){if(!a.a){for(var h=nd(d,e),g=0;g<h;g=g+1|0)f[g]=f[g<<2];
f=f.subarray(0,h)}Wa(c,d,e,f)}),c}function hb(e){var a=e.h,b=a?a.a:e.g,c=e.D,d=e.k;(e.m||e.t!=a)&&(d.bindFramebuffer(36160,a&&oc(a)),e.t=a),(e.m||!Qb(c,b))&&(d.viewport(b[0],b[1],b[2],b[3]),c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3])}function ib(i){if(i.m||i.u^i.d||i.q!=i.b){var a=i.k,b=i.d,c=i.u,d=b&255,e=b>>8&255,f=b>>16&255,h=b>>24,g=i.b;b^16777472?((i.m||c==16777472)&&a.colorMask(!0,!0,!0,!0),b^65537?((i.m||c==65537||c==16777472)&&a.enable(3042),a.blendFuncSeparate(i.c[d],i.c[e],i.c[f],i.c[h]),a.blendColor(g,g,g,g)):a.disable(3042)):a.colorMask(!1,!1,!1,!1),i.u=b,i.q=i.b}}function ec(c){var a=c.p,b=c.i;(c.m||a^b)&&(b?((c.m||!a)&&c.k.enable(2929),c.k.depthMask(b==2)):c.k.disable(2929),c.p=b)}function fc(g,a){for(var b=g.k,c=a.a,d=c.length,e=0;e<d;e=e+1|0){var f=c[e],h=f.b==1;b.vertexAttribPointer(e,f.c,h?5121:5126,h,a.b,f.d)}for(;g.a<d;)b.enableVertexAttribArray(g.a),g.a=g.a+1|0;for(;g.a>d;)g.a=g.a-1|0,b.disableVertexAttribArray(g.a);g.a=d}function gc(g,a,b){var c=new Image;c.onload=function(){var d=c.width,e=c.height,f=g.r||(g.r=vb(G.createElement('canvas'))),h=f.canvas;
h.width=d,h.height=e,f.drawImage(c,0,0),b(d,e,new Uint8Array(f.getImageData(0,0,d,e).data.buffer))},c.src=a}function qa(b){var a=b.a.a;return b.c^a.l&&(b.d=a.k.getUniformLocation(Ea(b.a),b.b),b.c=a.l),b.d}function hc(b,a){a!=b.f&&(b.f=a,b.e=!0)}function ic(e,a,b,c,d){(a!=e.h||b!=e.g||c!=e.i||d!=e.j)&&(e.h=a,e.g=b,e.i=c,e.j=d,e.e=!0)}function jc(b,a){Ac(b.m,a)||(Ha(b.m,a),b.e=!0)}function kc(c,a,b){(c.l!=a||c.k^b)&&(c.l=a,c.k=b,c.e=!0)}function ia(d,a,b){var c=na(d.e,a,null);c||(c=new wd(d,a),d.e[a]=c,d.f.push(c)),hc(c,b)}function $(h,a,b,c,d,e){var f=na(h.e,a,null);f||(f=new xd(h,a),h.e[a]=f,h.f.push(f)),ic(f,b,c,d,e)}function Ua(d,a,b){var c=na(d.e,a,null);c||(c=new yd(d,a),d.e[a]=c,d.f.push(c)),jc(c,b)}function Va(e,a,b,c){var d=na(e.e,a,null);d||(d=new zd(e,a),e.e[a]=d,e.f.push(d)),kc(d,b,c)}function Ea(d){var a=d.a.k;if(d.h^d.a.l){d.g=a.createProgram(),jb(d,a,35633,d.c),jb(d,a,35632,d.d);for(var b=d.b.a,c=0,e=b.length;c<e;c=c+1|0)a.bindAttribLocation(d.g,c,b[c].a);if(a.linkProgram(d.g),!a.getProgramParameter(d.g,
35714))throw new Error(a.getProgramInfoLog(d.g));d.h=d.a.l}return d.g}function lc(b){b.a.k.useProgram(Ea(b));for(var c=0,d=b.f,e=d.length;c<e;c=c+1|0){var a=d[c];a.Fb()}}function jb(e,a,b,c){var d=a.createShader(b);if(a.shaderSource(d,c),a.compileShader(d),!a.getShaderParameter(d,35713))throw new Error(a.getShaderInfoLog(d));a.attachShader(e.g,d)}function Mb(d,a,b,c){a^b&&c&&(d.d.set(d.d.subarray(a,d.j),b),kb(d,Math.min(a,b),Math.max(a,b)+c|0))}function Nb(c,a,b){c.d.set(a,b),kb(c,b,b+a.length|0)}function mc(b){var a=b.a.k;b.b^b.a.l&&(b.c=a.createBuffer(),b.b=b.a.l,b.e=!0),a.bindBuffer(34962,b.c),b.e&&(a.bufferData(34962,b.j,35048),b.f=b.g,b.h=b.i,b.e=!1),b.f<b.h&&(a.bufferSubData(34962,b.f,b.d.subarray(b.f,b.h)),b.f=2147483647,b.h=0)}function kb(c,a,b){c.f=Math.min(c.f,a),c.h=Math.max(c.h,b),c.g=Math.min(c.g,a),c.i=Math.max(c.i,b)}function Wa(d,a,b,c){(a^d.c||b^d.d||c)&&(d.c=a,d.d=b,d.e=c,d.j=!0)}function lb(c){var a=c.a.k;if(c.g^c.a.l&&(c.h=a.createTexture(),c.g=c.a.l,c.i=c.j=!0),c.i&&(a.bindTexture(3553,c.h),
a.texParameteri(3553,10240,c.a.j[c.b.c]),a.texParameteri(3553,10241,c.a.j[c.b.b]),a.texParameteri(3553,10242,c.b.d?33071:10497),a.texParameteri(3553,10243,c.b.d?33071:10497),c.i=!1),c.j){var b=c.b.a?6408:6409;a.bindTexture(3553,c.h),a.texImage2D(3553,0,b,c.c,c.d,0,b,5121,c.e),c.b.b^2||a.generateMipmap(3553),c.j=!1}return c.h}function nc(b){var a=b.a.k;return b.g^b.a.l&&(b.f=a.createRenderbuffer(),b.g=b.a.l,b.j=!0),b.j&&(a.bindRenderbuffer(36161,b.f),a.renderbufferStorage(36161,34041,b.c,b.d),b.j=!1),b.f}function oc(b){var a=b.a.k;return b.a^b.a.l&&(b.a=a.createFramebuffer(),b.a=b.a.l,b.a=!0),b.a&&(a.bindFramebuffer(36160,b.a),a.framebufferTexture2D(36160,36064,3553,lb(b.a),0),b.a&&a.framebufferRenderbuffer(36160,33306,36161,nc(b.a)),b.a=!1),b.a}function db(a){return a.a+a.d*.5}function Zb(a){return a.b+a.e*.5}function eb(a){return a.c+a.f*.5}function _b(e,a,b,c,d){$b(e,a,b),ac(e,a,c),bc(e,a,d)}function $b(k,a,b){var c=Math.floor(k.a)|0,d=Math.floor(k.b)|0,e=Math.floor(k.c)|0,f=(Math.ceil(k.a+k.d)|0)-1|0,h=(Math.ceil(k.b+k.e)|0)-1|0,g=(Math.ceil(k.c+k.f)|0)-1|0;
if(k.a+=b,b<0){for(var i=Math.floor(k.a)|0,j=c-1|0;j>=i;j=j-1|0)if(!U(a,j,d,e,j,h,g)){k.a=1.001+j;break}}else if(b>0)for(var m=(Math.ceil(k.a+k.d)|0)-1|0,l=f+1|0;l<=m;l=l+1|0)if(!U(a,l,d,e,l,h,g)){k.a=l-k.d-.001;break}}function ac(k,a,b){var c=Math.floor(k.a)|0,d=Math.floor(k.b)|0,e=Math.floor(k.c)|0,f=(Math.ceil(k.a+k.d)|0)-1|0,h=(Math.ceil(k.b+k.e)|0)-1|0,g=(Math.ceil(k.c+k.f)|0)-1|0;if(k.b+=b,b<0){for(var i=Math.floor(k.b)|0,j=d-1|0;j>=i;j=j-1|0)if(!U(a,c,j,e,f,j,g)){k.b=1.001+j;break}}else if(b>0)for(var m=(Math.ceil(k.b+k.e)|0)-1|0,l=h+1|0;l<=m;l=l+1|0)if(!U(a,c,l,e,f,l,g)){k.b=l-k.e-.001;break}}function bc(k,a,b){var c=Math.floor(k.a)|0,d=Math.floor(k.b)|0,e=Math.floor(k.c)|0,f=(Math.ceil(k.a+k.d)|0)-1|0,h=(Math.ceil(k.b+k.e)|0)-1|0,g=(Math.ceil(k.c+k.f)|0)-1|0;if(k.c+=b,b<0){for(var i=Math.floor(k.c)|0,j=e-1|0;j>=i;j=j-1|0)if(!U(a,c,d,j,f,h,j)){k.c=1.001+j;break}}else if(b>0)for(var m=(Math.ceil(k.c+k.f)|0)-1|0,l=g+1|0;l<=m;l=l+1|0)if(!U(a,c,d,l,f,h,l)){k.c=l-k.f-.001;break}}function ca(a){return a.a.subarray(0,
a.c)}function n(b,a){return pa(b,4),b.b[b.c>>2]=a,b.c=b.c+4|0,b}function P(b,a){return pa(b,4),b.a[b.c]=a&255,b.a[b.c+1|0]=a>>8&255,b.a[b.c+2|0]=a>>16&255,b.a[b.c+3|0]=a>>>24,b.c=b.c+4|0,b}function y(b,a){return pa(b,1),b.a[b.c]=a,b.c=b.c+1|0,b}function L(b,a){return pa(b,4),b.a[b.c]=a,b.a[b.c+1|0]=a>>8,b.a[b.c+2|0]=a>>16,b.a[b.c+3|0]=a>>24,b.c=b.c+4|0,b}function gb(b){var a=b.a[b.d];return b.d=b.d+1|0,a}function M(b){var a=b.a[b.d]|b.a[b.d+1|0]<<8|b.a[b.d+2|0]<<16|b.a[b.d+3|0]<<24;return b.d=b.d+4|0,a}function cc(b){var a=b.a[b.d]|b.a[b.d+1|0]<<8|b.a[b.d+2|0]<<16|b.a[b.d+3|0]<<24;return b.d=b.d+4|0,a}function s(b){var a=b.b[b.d>>2];return b.d=b.d+4|0,a}function pa(d,a){if(!d.a||(d.c+a|0)>d.a.length){var b=new Float32Array((d.c+a<<1)+3>>2),c=new Uint8Array(b.buffer);d.a&&c.set(d.a),d.b=b,d.a=c}}function pc(a){for(var b=new td,c=new Vd,d=new Vd,e=0;e<8;e=e+1|0)for(var f=0;f<9;f=f+1|0){var h=f*.125,g=.05+h*.9,i=h*3-1,j=e<4?1:0;e?e^1?e^2?e^3?e^4?e^5?e^6?(v(c,-1,i),v(d,0,h)):(v(c,2,i),v(d,1,h)):(v(c,i,-1),v(d,h,0)):(v(c,
i,2),v(d,h,1)):(v(c,.05,g),v(d,0,h)):(v(c,.95,g),v(d,1,h)):(v(c,g,.05),v(d,h,0)):(v(c,g,.95),v(d,h,1)),a(c),a(d),n(b,c.a*2-1),n(b,c.b*2-1),n(b,j),f||(n(b,c.a*2-1),n(b,c.b*2-1),n(b,j)),n(b,d.a*2-1),n(b,d.b*2-1),n(b,0),f^8||(n(b,d.a*2-1),n(b,d.b*2-1),n(b,0))}return b}function mb(a){return a.a||(a.a=rc(a.f)),a.a}function nb(){var a=navigator.userAgent,b=screen.width,c=screen.height,d=b<c?b:c,e=b<c?c:b;return~a.indexOf('iPhone')?d==480&&e==320?fd:d==568&&e==320?gd:d==667&&e==375?Bb:d==736&&e==414?hd:null:~a.indexOf('Nexus 5')?cd:~a.indexOf('Nexus 6')?dd:~a.indexOf('LG-')?ed:null}function I(a,b){for(var c=a.length,d=b*b,e=0,f=0;f<c;f=f+1|0)e=d*(e+a[(c-f|0)-1|0]);return b*(e+1)}function rc(a){for(var b=[],c=[],d=0;d<100;d=d+1|0){for(var e=(d+1|0)*1/100,f=I(a,e),h=f,g=[],i=0;i<4;i=i+1|0)h*=f*f,g.push(h);b.push(g),c.push(e-f)}return sc(b,c)}function sc(a,b){for(var c=a.length,d=a[0].length,e=[],f=0;f<d;f=f+1|0){for(var h=[],g=0;g<d;g=g+1|0){for(var i=0,j=0;j<c;j=j+1|0)i+=a[j][f]*a[j][g];h.push(i)}e.push(h)}for(var m=[],l=0;l<d;l=l+1|0){
for(var k=0,o=0;o<c;o=o+1|0)k+=a[o][l]*b[o];m.push(k)}return tc(e,m)}function tc(a,b){for(var c=a.length,d=0,k=c-1|0;d<k;d=d+1|0)for(var e=d+1|0;e<c;e=e+1|0){for(var f=a[e],h=f[d]/a[d][d],g=d+1|0;g<c;g=g+1|0)f[g]=f[g]-h*a[d][g];b[e]=b[e]-h*b[d]}var i=[];_a(i,c,0);for(var j=c-1|0;j>-1;j=j-1|0){for(var m=b[j],l=j+1|0;l<c;l=l+1|0)m-=a[j][l]*i[l];i[j]=m/a[j][j]}return i}function Fa(a,b){return a.e-b.c-b.b/2}function uc(a,b){var c=Math.tan(-a.d[0]*.017453292519943295),d=Math.tan(a.d[3]*.017453292519943295),e=Math.tan(a.d[1]*.017453292519943295),f=Math.tan(-a.d[2]*.017453292519943295),h=b.a/4,g=b.b/2,i=a.c/2-h,j=-Fa(a,b),m=a.b,l=I(a.f,(i-h)/m),k=I(a.f,(j+g)/m),o=I(a.f,(i+h)/m),r=I(a.f,(j-g)/m);return[Math.max(c,l),Math.min(d,k),Math.min(e,o),Math.max(f,r)]}function vc(a,b){var c=mb(a),d=I(c,Math.tan(-a.d[0]*.017453292519943295)),e=I(c,Math.tan(a.d[3]*.017453292519943295)),f=I(c,Math.tan(a.d[1]*.017453292519943295)),h=I(c,Math.tan(-a.d[2]*.017453292519943295)),g=b.a/4,i=b.b/2,j=a.c/2-g,m=-Fa(a,b),l=a.b,k=(j-g)/l,o=(m+i)/l,r=(j+g)/l,q=(m-i)/l;
return[Math.max(d,k),Math.min(e,o),Math.min(f,r),Math.max(h,q)]}function wc(a,b,c){var d=a.b,e=(b.a-a.c)/2,f=Fa(a,b)+b.b/2,h=(c[0]*d+e)/b.a,g=(c[1]*d+f)/b.b,i=(c[2]*d+e)/b.a,j=(c[3]*d+f)/b.b;return[h,j,i-h,g-j]}function C(g,a,b,c,d,e,f,h){n(N,a),n(N,b),n(N,c),P(N,0),P(N,0),P(N,0),n(N,d),n(N,e),n(N,f),P(N,0),P(N,0),P(N,0)}function ob(g,a,b,c,d,e,f,h){C(g,a,b,c,d,b,c,h),C(g,a,b,c,a,e,c,h),C(g,a,b,c,a,b,f,h),C(g,d,b,c,d,e,c,h),C(g,a,e,c,a,e,f,h),C(g,a,b,f,d,b,f,h),C(g,d,b,c,d,b,f,h),C(g,a,e,c,d,e,c,h),C(g,a,b,f,a,e,f,h),C(g,d,e,f,a,e,f,h),C(g,d,e,f,d,b,f,h),C(g,d,e,f,d,e,c,h)}function xc(c,a){if(N.c){var b=oa(c.b,a.b,ca(N));ha(c.a,0,a,b,0),Da(b),N.c=0}}function Ga(a){return Ha(a,id),a}function Ha(b,a){return b.a=a.a,b.b=a.b,b.c=a.c,b.d=a.d,b.e=a.e,b.f=a.f,b.h=a.h,b.g=a.g,b.i=a.i,b.j=a.j,b.m=a.m,b.l=a.l,b.k=a.k,b.o=a.o,b.r=a.r,b.q=a.q,b}function Ia(d,a,b,c){return d.d=a,d.g=b,d.l=c,d.a=d.f=d.m=d.q=1,d.b=d.c=d.e=d.h=d.i=d.j=d.k=d.o=d.r=0,d}function Q(g,a,b,c,d){var e=Math.cos(d),f=Math.sin(d),h=1-e;return g.a=a*a*h+e,
g.b=a*b*h-c*f,g.c=a*c*h+b*f,g.e=b*a*h+c*f,g.f=b*b*h+e,g.h=b*c*h-a*f,g.i=c*a*h-b*f,g.j=c*b*h+a*f,g.m=c*c*h+e,g.q=1,g.d=g.g=g.l=g.k=g.o=g.r=0,g}function zc(h,a,b,c,d){var e=Math.tan(a/2)*c,f=e*b;return pb(h,-f,f,-e,e,c,d)}function pb(h,a,b,c,d,e,f){return h.a=e*2/(b-a),h.c=(b+a)/(b-a),h.f=e*2/(d-c),h.h=(d+c)/(d-c),h.m=-(f+e)/(f-e),h.l=f*-2*e/(f-e),h.r=-1,h.b=h.d=h.e=h.g=h.i=h.j=h.k=h.o=h.q=0,h}function E(p,a){var b=p.a,c=p.b,d=p.c,e=p.d,f=p.e,h=p.f,g=p.h,i=p.g,j=p.i,m=p.j,l=p.m,k=p.l,o=p.k,r=p.o,q=p.r,u=p.q;return p.a=b*a.a+c*a.e+d*a.i+e*a.k,p.b=b*a.b+c*a.f+d*a.j+e*a.o,p.c=b*a.c+c*a.h+d*a.m+e*a.r,p.d=b*a.d+c*a.g+d*a.l+e*a.q,p.e=f*a.a+h*a.e+g*a.i+i*a.k,p.f=f*a.b+h*a.f+g*a.j+i*a.o,p.h=f*a.c+h*a.h+g*a.m+i*a.r,p.g=f*a.d+h*a.g+g*a.l+i*a.q,p.i=j*a.a+m*a.e+l*a.i+k*a.k,p.j=j*a.b+m*a.f+l*a.j+k*a.o,p.m=j*a.c+m*a.h+l*a.m+k*a.r,p.l=j*a.d+m*a.g+l*a.l+k*a.q,p.k=o*a.a+r*a.e+q*a.i+u*a.k,p.o=o*a.b+r*a.f+q*a.j+u*a.o,p.r=o*a.c+r*a.h+q*a.m+u*a.r,p.q=o*a.d+r*a.g+q*a.l+u*a.q,p}function Ac(b,a){return b.a==a.a&&b.b==a.b&&b.c==a.c&&b.d==a.d&&b.e==a.e&&b.f==a.f&&b.h==a.h&&b.g==a.g&&b.i==a.i&&b.j==a.j&&b.m==a.m&&b.l==a.l&&b.k==a.k&&b.o==a.o&&b.r==a.r&&b.q==a.q}
function Bc(d,a){if(d.a=[],(a.d+4|0)>a.c)return!1;var b=M(a);if((a.d+nd(b,28)|0)>a.c)return!1;for(var c=0;c<b;c=c+1|0)d.a.push(new Nd(M(a),s(a),s(a),s(a),s(a),s(a),s(a)));return!0}function Cc(c,a){L(a,c.a.length);for(var d=0,e=c.a,f=e.length;d<f;d=d+1|0){var b=e[d];L(a,b.a),n(a,b.b),n(a,b.c),n(a,b.d),n(a,b.e),n(a,b.f),n(a,b.h)}}function qb(h,a,b){for(var c=new td,d=b.a,g=0,i=h.a,j=i.length;g<j;g=g+1|0){var e=i[g],f=d[e.a];(a||!f.x)&&(Ja(h,c,f,e.b,e.c),Ja(h,c,f,e.d,e.e),Ja(h,c,f,e.f,e.h))}return c}function Ja(l,a,b,c,d){var e=b.a+b.h*c+b.j*d,f=b.b+b.g*c+b.m*d,h=b.c+b.i*c+b.l*d,g=(b.k+(b.r-b.k)*c)*65535+.5|0,i=(b.o+(b.q-b.o)*d)*65535+.5|0,j=(b.u+(b.t-b.u)*c)*65535+.5|0,m=(b.p+(b.D-b.p)*d)*65535+.5|0;n(a,e),n(a,f),n(a,h),y(a,g>>8),y(a,g&255),y(a,i>>8),y(a,i&255),y(a,j>>8),y(a,j&255),y(a,m>>8),y(a,m&255),y(a,Math.round(127.5+(b.d-e)*255)|0),y(a,Math.round(127.5+(b.e-f)*255)|0),y(a,Math.round(127.5+(b.f-h)*255)|0),y(a,b.x?0:255)}function Dc(d,a){if(d.a=[],(a.d+12|0)>a.c)return!1;var b=M(a);if((a.d+nd(b,88)|0)>a.c)return!1;
for(var c=0;c<b;c=c+1|0)d.a.push(new Od(s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),cc(a),!!M(a)));return!0}function Ec(c,a){L(a,c.a.length);for(var d=0,e=c.a,f=e.length;d<f;d=d+1|0){var b=e[d];n(a,b.a),n(a,b.b),n(a,b.c),n(a,b.d),n(a,b.e),n(a,b.f),n(a,b.h),n(a,b.g),n(a,b.i),n(a,b.j),n(a,b.m),n(a,b.l),n(a,b.k),n(a,b.o),n(a,b.r),n(a,b.q),n(a,b.u),n(a,b.p),n(a,b.t),n(a,b.D),P(a,b.B),L(a,b.x|0)}}function Fc(i){var a=G.createElement('canvas'),b=vb(a);a.width=i.b,a.height=i.c;var c=b.createImageData(i.b,i.c);c.data.set(new Uint8ClampedArray(i.d.buffer,i.d.byteOffset,i.d.length)),b.putImageData(c,0,0);for(var d=a.toDataURL(),e=d.indexOf(','),f=atob(d.slice(e+1|0)),h=new Uint8Array(f.length),g=0,j=f.length;g<j;g=g+1|0)h[g]=f.charCodeAt(g);return h}function Gc(t){for(var a=0,b=1,c=1,D=0,B=t.a,x=B.length;D<x;D=D+1|0){var d=B[D];d.x||(a=a+1|0)}for(;nd(b/9|0,c/9|0)<a;)b^c?c=c<<1:b=b<<1;for(var e=b/9|0,f=new Uint8Array(b*c<<2),h=0,J=0,Y=t.a,R=Y.length;J<R;J=J+1|0){var g=Y[J];
if(!g.x){var i=g.B,j=i&255,m=i>>8&255,l=i>>16&255,k=i>>>24,o=nd(h%e|0,9),r=nd(h/e|0,9);h=h+1|0,g.u=(o+.5)/b,g.p=(r+.5)/c,g.t=((o+9|0)-.5)/b,g.D=((r+9|0)-.5)/c;for(var q=0;q<9;q=q+1|0)for(var u=0;u<9;u=u+1|0){var p=(o+u|0)+nd(r+q|0,b)<<2;f[p]=j,f[p+1|0]=m,f[p+2|0]=l,f[p+3|0]=k}}}t.b=b,t.c=c,t.d=f}function S(e,a,b,c,d){e.g=e.g+a|0,e.i=e.i+b|0,e.j=e.j+c|0,d||(e.m=e.g,e.l=e.i,e.k=e.j)}function fa(e,a){for(var b=Math.min(e.g,e.m),g=Math.max(e.g,e.m)+1|0;b<g;b=b+1|0)for(var c=Math.min(e.i,e.l),h=Math.max(e.i,e.l)+1|0;c<h;c=c+1|0)for(var d=Math.min(e.j,e.k),f=Math.max(e.j,e.k)+1|0;d<f;d=d+1|0)Hc(e.b,b,c,d,a);Ka(e.b)}function Hc(f,a,b,c,d){var e=ra(f.a,a,b,c);e^d&&(f.d.push(new Td(a,b,c,e,d)),Ma(f.a,a,b,c,d))}function Ic(c){if(Ka(c),c.b.length){for(var a=c.b.pop(),d=0,e=a.a,f=e.length;d<f;d=d+1|0){var b=e[d];Ma(c.a,b.a,b.b,b.c,b.d)}c.c.push(a)}}function Jc(c){if(Ka(c),c.c.length){for(var a=c.c.pop(),d=0,e=a.a,f=e.length;d<f;d=d+1|0){var b=e[d];Ma(c.a,b.a,b.b,b.c,b.e)}c.b.push(a)}}function Ka(a){a.d.length&&(a.b.push(new Ud(a.d)),
_a(a.c,0,null),a.d=[])}function v(c,a,b){return c.a=a,c.b=b,c}function F(d,a,b,c){return d.a=a,d.b=b,d.c=c,d}function Kc(b,a){return b.a=a.a,b.b=a.b,b.c=a.c,b}function Lc(b,a){return b.a-=a.a,b.b-=a.b,b.c-=a.c,b}function rb(b,a){return b.a*=a,b.b*=a,b.c*=a,b}function Mc(a){return a.a*a.a+a.b*a.b+a.c*a.c}function Nc(a){return Math.sqrt(a.a*a.a+a.b*a.b+a.c*a.c)}function La(b){var a=Nc(b);return a>0&&rb(b,1/a),b}function Rc(f,a,b,c,d){var e=a|b<<3|c<<6;return f.d[e]^d?(f.d[e]=d,!0):!1}function Na(b){for(var a=0;a<512;a=a+1|0)if(b.d[a])return!1;return!0}function ub(a){var c,b;(b=a.h)&&Da(b),(c=a.g)&&Da(c),a.h=a.g=null}function Sc(c,a,b){return c.h||(c.h=oa(a,ab,ca(qb(c.e,1,b)))),c.h}function Tc(c,a,b){return c.g||(c.g=oa(a,ab,ca(qb(c.e,0,b)))),c.g}function Uc(X,a){X.e.a=[],ub(X);for(var b=X.a,c=X.b,d=X.c,e=X.d,f=0;f<8;f=f+1|0)for(var h=c+f|0,g=0;g<8;g=g+1|0)for(var i=b+g|0,j=0;j<8;j=j+1|0){var m=d+j|0,l=e[g|f<<3|j<<6];l&&V(X,a,i,h,m,i+.5,h+.5,m+.5,1,0,0,0,0,1,T(l),f>0&&e[g|f-1<<3|j<<6]!=0)}for(var k=0;k<8;k=k+1|0)for(var o=k^7,r=(c+o|0)+1|0,q=0;q<8;q=q+1|0)for(var u=b+q|0,p=0;p<8;p=p+1|0){
var t=d+p|0,D=e[q|o<<3|p<<6];D&&V(X,a,u,r,t,u+.5,r-.5,t+.5,0,0,1,1,0,0,T(D),o<7&&e[q|o+1<<3|p<<6]!=0)}for(var B=0;B<8;B=B+1|0)for(var x=b+B|0,J=0;J<8;J=J+1|0)for(var Y=c+J|0,R=0;R<8;R=R+1|0){var ga=d+R|0,Z=e[B|J<<3|R<<6];Z&&V(X,a,x,Y,ga,x+.5,Y+.5,ga+.5,0,0,1,0,1,0,T(Z),B>0&&e[B-1|J<<3|R<<6]!=0)}for(var A=0;A<8;A=A+1|0)for(var z=A^7,Qa=(b+z|0)+1|0,ja=0;ja<8;ja=ja+1|0)for(var Xa=c+ja|0,sa=0;sa<8;sa=sa+1|0){var Ya=d+sa|0,zb=e[z|ja<<3|sa<<6];zb&&V(X,a,Qa,Xa,Ya,Qa-.5,Xa+.5,Ya+.5,0,1,0,0,0,1,T(zb),z<7&&e[z+1|ja<<3|sa<<6]!=0)}for(var aa=0;aa<8;aa=aa+1|0)for(var Za=d+aa|0,O=0;O<8;O=O+1|0)for(var ya=b+O|0,ba=0;ba<8;ba=ba+1|0){var za=c+ba|0,Aa=e[O|ba<<3|aa<<6];Aa&&V(X,a,ya,za,Za,ya+.5,za+.5,Za+.5,0,1,0,1,0,0,T(Aa),aa>0&&e[O|ba<<3|aa-1<<6]!=0)}for(var ka=0;ka<8;ka=ka+1|0)for(var la=ka^7,Ba=(d+la|0)+1|0,ta=0;ta<8;ta=ta+1|0)for(var Cb=b+ta|0,ua=0;ua<8;ua=ua+1|0){var Db=c+ua|0,Eb=e[ta|ua<<3|la<<6];Eb&&V(X,a,Cb,Db,Ba,Cb+.5,Db+.5,Ba-.5,1,0,0,0,1,0,T(Eb),la<7&&e[ta|ua<<3|la+1<<6]!=0)}}function V(t,a,b,c,d,e,f,h,g,i,j,m,l,k,o,r){
var q=(b*g+c*i+d*j)/3,u=(b*m+c*l+d*k)/3,p=a.a.length;q-=Math.floor(q),u-=Math.floor(u),a.a.push(new Od(b,c,d,e,f,h,g,i,j,m,l,k,q,u,q+1/3,u+1/3,0,0,0,0,o,r)),t.e.a.push(new Nd(p,0,0,1,0,1,1)),t.e.a.push(new Nd(p,0,0,1,1,0,1))}function U(m,a,b,c,d,e,f){for(var h=c;h<=f;h=h+1|0)for(var g=b;g<=e;g=g+1|0)for(var i=a;i<=d;i=i+1|0){var j=ra(m,i,g,h);if(j&&j^4)return!1}return!0}function ra(e,a,b,c){var d=H(e.e,a>>3&2047|b<<8&2095104|c<<18&-2097152,null);return d?d.d[a&7|(b&7)<<3|(c&7)<<6]:0}function Ma(g,a,b,c,d){var e=a>>3&2047|b<<8&2095104|c<<18&-2097152,f=g.e,h=H(f,e,null);!h&&d&&tb(a,b,c)&&(h=new Yd(a&-8,b&-8,c&-8),f[e]=h,g.f.push(h)),h&&Rc(h,a&7,b&7,c&7,d)&&(g.h=!0)}function Oc(b){if(b.h){for(var c=0,d=b.f,e=d.length;c<e;c=c+1|0){var a=d[c];Uc(a,b.d)}Gc(b.d),Wa(b.c,b.d.b,b.d.c,b.d.d),b.h=!1}}function Pc(k,a,b,c){Oc(k);for(var o=0,r=k.f,q=r.length;o<q;o=o+1|0){var d=r[o];d.f=Mc(Lc(F(ld,d.a+4,d.b+4,d.c+4),b))}for(var e=k.f.length,f=1;f<e;f=f+1|0){for(var h=k.f[f],g=f-1|0;g>-1&&k.f[g].f>h.f;)k.f[g+1|0]=k.f[g],g=g-1|0;
k.f[g+1|0]=h}for(var i=Math.sqrt(3)*4,j=c.i*b.a+c.j*b.b+c.m*b.c,u=0,p=k.f,t=p.length;u<t;u=u+1|0){var m=p[u],l=c.i*(m.a+4)+c.j*(m.b+4)+c.m*(m.c+4);l-i>j||ha(k.a,1,a,l+i+3<j?Tc(m,k.b,k.d):Sc(m,k.b,k.d),1)}}function sb(k,a,b){for(var c=0,o=16;c<o;c=c+1|0)if((a.d+1|0)>a.c||'webglvrlevel\x01\0\0\0'.charCodeAt(c)^gb(a))return!1;if((a.d+4|0)>a.c)return!1;var d=M(a);if((a.d+nd(d,524)|0)>a.c)return!1;for(var r=0,q=k.f,u=q.length;r<u;r=r+1|0){var e=q[r];ub(e)}for(k.e={},k.f=[],k.h=!0;d>0;){var f=M(a)<<3,h=M(a)<<3,g=M(a)<<3;if(!tb(f,h,g))return!1;var i=new Yd(f,h,g),j=f>>3&2047|h<<8&2095104|g<<18&-2097152;if(j in k.e)return!1;for(var m=0;m<512;m=m+1|0)i.d[m]=gb(a);k.e[j]=i,k.f.push(i),d=d-1|0}if(b==1){if(!Dc(k.d,a))return!1;for(var p=0,t=k.f,D=t.length;p<D;p=p+1|0){var l=t[p];if(!Bc(l.e,a))return!1}k.h=!1}return!0}function Qc(g){for(var a=new td,b=0,i=0,j=g.f,m=j.length;i<m;i=i+1|0){var c=j[i];Na(c)||(b=b+1|0)}for(var d=0,l=16;d<l;d=d+1|0)y(a,'webglvrlevel\x01\0\0\0'.charCodeAt(d));L(a,b);for(var k=0,o=g.f,r=o.length;k<r;k=k+1|0){
var e=o[k];if(!Na(e)){L(a,e.a>>3),L(a,e.b>>3),L(a,e.c>>3);for(var f=0;f<512;f=f+1|0)y(a,e.d[f])}}Ec(g.d,a);for(var q=0,u=g.f,p=u.length;q<p;q=q+1|0){var h=u[q];Na(h)||Cc(h.e,a)}return a}function tb(a,b,c){return a==a<<18>>18&&b==b<<19>>19&&c==c<<18>>18}function Pa(a){for(var b=[],c=0,d=a.length;c<d;c=c+1|0)b.push(a[c]);return b}function w(a,b,c){a.addEventListener(b,c)}function W(a){a.preventDefault()}function _a(c,a,b){for(;c.length<a;)c.push(b);for(;c.length>a;)c.pop()}function $a(a){return a[a.length-1|0]}function Pb(d,a){for(var b=0,c=0,e=d.length;c<e;c=c+1|0)a(d[c])||(b<c&&(d[b]=d[c]),b=b+1|0);for(;b<d.length;)d.pop()}function Qb(c,a){if(c.length^a.length)return!1;for(var b=0,d=c.length;b<d;b=b+1|0)if(c[b]!=a[b])return!1;return!0}function na(d,a,b){var c=d[a];return c!==void 0?c:b}function H(d,a,b){var c=d[a];return c!==void 0?c:b}function Ob(a,b,c){return a<b?b:a>c?c:a}function T(a){switch(a){case 1:return-12615745;case 2:return-16711681;case 3:return-4210753;case 4:return-4243712}return 0}function vb(a){
try{return a.getContext('2d')}catch(b){}return null}function Zc(c){var a=c,b=a.mozRequestPointerLock||a.requestPointerLock;b&&b.call(c)}function _c(c,a){var b=null;try{b=c.getContext('webgl',a)}catch(d){}try{b||(b=c.getContext('experimental-webgl',a))}catch(e){}return b}function wb(){var a=this.performance;return a&&a.now?a.now():+new Date}function Vc(a){return a.orientation||0}function xb(b){var a=b;return a.mozPointerLockElement||(a.pointerLockElement||null)}function Wc(a){return a.mozMovementX|a.movementX|0}function Xc(a){return a.mozMovementY|a.movementY|0}function Yc(c){var a=c,b=a.webkitRequestFullscreen||(a.mozRequestFullScreen||a.requestFullscreen);b&&b.call(c)}function od(a,b){this.a=this.b=this.c=this.d=this.e=this.f=null,this.h=G.getElementById('instructions'),this.g=this.i=this.j=this.m=this.l=this.k=null,this.o=new Rd,this.r=0,this.q=new Md,this.u=new Md,this.p=new Wd,this.t=new Md,this.D=this.B=this.x=this.J=this.Y=this.R=0,this.ga=!1,this.Z=this.A=this.z=0,this.a=a,this.b=new pd(a),this.c=Ta(a,$c,
'texture.png'),this.d=Ta(a,ad,'lightmap.png'),this.e=new Kd(a,this.b),this.f=new Xd(a,this.b,this.d),sb(this.f,new td.fb(b),1),this.i=new jd(this.f),this.g=new kd(this.f),this.j=this.g,this.m=new Gd(this.a,this)}function sd(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f}function td(){this.a=this.b=null,this.c=this.d=0,this.b=new Float32Array(256),this.a=new Uint8Array(this.b.buffer)}td.fb=function(a){this.a=this.b=null,this.d=0,this.c=a.length,this.b=new Float32Array(this.c+3>>2),this.a=new Uint8Array(this.b.buffer),this.a.set(a)};td.fb.prototype=td.prototype;function Gd(a,b){this.a=this.b=null,this.c=new Md,this.d=null,this.a=a,this.b=b,this.d=xa(a,ab,'precision highp float;uniform mat4 t,u;uniform vec4 g;attribute vec3 c;attribute vec4 k,p,q;varying float d;varying vec2 j,h;vec4 s(){vec3 a=c+k.xyz-.5;return u*t*vec4(mix(c,a,clamp(dot(g.xyz,a)-g.w,0.,1.)),1);}vec2 i(vec4 a){return a.xz*.996109+a.yw*.003891;}void main(){d=k.w,h=i(q),j=i(p),gl_Position=s();}','precision highp float;uniform sampler2D x,y;varying float d;varying vec2 j,h;void main(){gl_FragColor=texture2D(x,j)*(d*(1.-.1*float(texture2D(y,h).x>.5)));}')}
Gd.prototype.Gb=function(){var a=this.a;zc(this.c,1.0471975511965976,a.B/a.o,1,100),Sa(a,0),a.i=2,_(a,1,0,1,0,0),va(this.b,0,this.c,this.d)};function Hd(a,b,c){this.a=this.b=null,this.c=(yb=nb())||Bb,this.d=new Md,this.e=this.f=null,this.h=new Md,this.g=qc,this.i=this.j=null,this.a=a,this.b=b,this.f=xa(a,Rb,'precision highp float;uniform float l;attribute vec3 c;varying float d;void main(){d=c.z,gl_Position=vec4(c.x*l,c.y,0,1);}','precision highp float;varying float d;void main(){gl_FragColor=vec4(d);}'),this.i=xa(a,ab,'precision highp float;uniform mat4 t,u;uniform vec4 g,o,f,n,m;uniform float l;attribute vec3 c;attribute vec4 k,p,q;varying float d;varying vec2 j,h;vec4 s(){vec3 a=c+k.xyz-.5;return u*t*vec4(mix(c,a,clamp(dot(g.xyz,a)-g.w,0.,1.)),1);}vec2 i(vec4 a){return a.xz*.996109+a.yw*.003891;}void main(){vec4 a=s();float b=abs(a.w),v=mix(o.x,o.z,(.5+a.x/b*.5*l-n.x)/n.z),r=mix(o.w,o.y,(.5+a.y/b*.5-n.y)/n.w),e=v*v+r*r,w=1.+e*(m.x+e*(m.y+e*(m.z+e*m.w)));a.x=((v*w-f.x)/(f.z-f.x)*2.-1.)*b*l,a.y=((r*w-f.w)/(f.y-f.w)*2.-1.)*b,d=k.w,h=i(q),j=i(p),gl_Position=a;}',
'precision highp float;uniform sampler2D x,y;varying float d;varying vec2 j,h;void main(){gl_FragColor=texture2D(x,j)*(d*(1.-.1*float(texture2D(y,h).x>.5)));}');var d=this.g,e=this.c,f=mb(d),h=uc(d,e),g=vc(d,e),i=wc(d,e,g);i[0]=i[0]*2,i[2]=i[2]*2,$(this.i,'m',f[0],f[1],f[2],f[3]),$(this.i,'o',h[0],h[1],h[2],h[3]),$(this.i,'f',g[0],g[1],g[2],g[3]),$(this.i,'n',i[0],i[1],i[2],i[3]),pb(this.d,h[0]*1,h[2]*1,h[3]*1,h[1]*1,1,100),Ha(this.h,this.d),this.h.c=-this.h.c,this.j=function(j){var m=h[0]+(h[2]-h[0])*j.a,l=h[3]+(h[1]-h[3])*j.b,k=Math.sqrt(m*m+l*l),o=I(f,k)/k;j.a=i[0]+i[2]*(m*o-g[0])/(g[2]-g[0]),j.b=i[1]+i[3]*(l*o-g[3])/(g[1]-g[3])},this.e=oa(c,Rb,ca(pc(this.j)))}Hd.prototype.Gb=function(){var a=this.a,b=a.B,c=a.o;Sa(a,0),ia(this.i,'l',1),wa(a,0,0,b/2|0,c),a.i=2,_(a,1,0,1,0,0),va(this.b,1,this.d,this.i),ia(this.f,'l',1),a.i=0,_(a,0,2,0,2,0),ha(a,2,this.f,this.e,0),ia(this.i,'l',-1),wa(a,b/2|0,0,(b+1|0)/2|0,c),a.i=2,_(a,1,0,1,0,0),va(this.b,2,this.h,this.i),ia(this.f,'l',-1),a.i=0,_(a,0,2,0,2,0),ha(a,2,this.f,this.e,
0)};function Kd(a,b){this.a=a,this.b=b}function Md(){this.a=1,this.b=this.c=this.d=this.e=0,this.f=1,this.h=this.g=this.i=this.j=0,this.m=1,this.l=this.k=this.o=this.r=0,this.q=1}function Nd(a,b,c,d,e,f,h){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f,this.h=h}function Od(a,b,c,d,e,f,h,g,i,j,m,l,k,o,r,q,u,p,t,D,B,x){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f,this.h=h,this.g=g,this.i=i,this.j=j,this.m=m,this.l=l,this.k=k,this.o=o,this.r=r,this.q=q,this.u=u,this.p=p,this.t=t,this.D=D,this.B=B,this.x=x}function Pd(){this.a=[]}function Qd(){this.a=[],this.b=this.c=1,this.d=new Uint8Array(4)}function Rd(){this.a=new Wd,this.b=this.c=!1}function jd(a){this.a=this.b=null,this.c=F(new Wd,.5,.5,.5),this.d=this.e=this.f=this.h=this.g=this.i=this.j=this.m=this.l=this.k=0,this.a=a,this.b=new Sd(a)}ma=jd.prototype;ma.Ra=function(){return this.c};ma.Hb=function(a){this.g=this.m=Math.floor(a.a)|0,this.i=this.l=Math.floor(a.b)|0,this.j=this.k=Math.floor(a.c)|0,F(this.c,this.g+.5,this.i+.5,this.j+.5)};ma.Ib=function(a,b){
switch(a){case 7:case 3:S(this,-this.f|0,0,-this.h|0,b);break;case 10:case 5:S(this,this.f,0,this.h,b);break;case 11:S(this,0,1,0,b);break;case 23:S(this,0,-1,0,b);break;case 25:case 6:S(this,-this.d|0,0,-this.e|0,b);break;case 29:case 4:S(this,this.d,0,this.e,b);break;case 0:fa(this,0);break;case 1:Ic(this.b);break;case 2:Jc(this.b);break;case 34:fa(this,1);break;case 35:fa(this,3);break;case 36:fa(this,4);break;case 37:fa(this,2);break}};ma.Jb=function(a){var b=ra(this.a,this.g,this.i,this.j)?-.01:.01;ob(a,Math.min(this.g,this.m)+b,Math.min(this.i,this.l)+b,Math.min(this.j,this.k)+b,(Math.max(this.g,this.m)+1|0)-b,(Math.max(this.i,this.l)+1|0)-b,(Math.max(this.j,this.k)+1|0)-b,-1)};ma.Kb=function(a,b,c){this.d=this.e=this.f=this.h=0,Math.abs(b.i)>Math.abs(b.m)?b.i>0?(this.d=this.h=-1):(this.d=this.h=1):b.m>0?(this.e=-1,this.f=1):(this.e=1,this.f=-1);var d=1-Math.pow(1e-08,c);this.c.a+=(this.g+.5-this.c.a)*d,this.c.b+=(this.i+.5-this.c.b)*d,this.c.c+=(this.j+.5-this.c.c)*d};function kd(a){this.a=a,this.b=new sd(.1,
0,.1,.8,.8,.8),this.c=new Wd,this.d=new Wd,this.e=new Wd,this.f=new Wd,this.h=new Wd,this.g=0,this.i=!1}ma=kd.prototype;ma.Ra=function(){return F(this.c,db(this.b),Zb(this.b),eb(this.b))};ma.Hb=function(a){this.b.a=a.a-this.b.d/2,this.b.b=a.b-this.b.e/2,this.b.c=a.c-this.b.f/2};ma.Ib=function(a,b){};ma.Jb=function(a){ob(a,this.b.a+.01,this.b.b+.01,this.b.c+.01,this.b.a+this.b.d-.01,this.b.b+this.b.e-.01,this.b.c+this.b.f-.01,-1)};ma.Kb=function(a,b,c){this.i&&(F(this.d,a.a.a,0,a.a.c),a.b&&(this.d.c-=1),La(F(this.f,b.i,0,b.m)),La(F(this.h,b.a,0,b.c)),F(this.d,this.f.a*this.d.c+this.h.a*this.d.a,0,this.f.c*this.d.c+this.h.c*this.d.a)),rb(La(Kc(this.e,this.d)),c*6),this.i&&ra(this.a,Math.floor(db(this.b))|0,(Math.floor(this.b.b)|0)-1|0,Math.floor(eb(this.b))|0)==2?(this.g=10,this.i=!1):this.g-=c*16;var d=this.b.a+this.e.a,e=this.b.b+this.g*c,f=this.b.c+this.e.c;_b(this.b,this.a,this.e.a,this.g*c,this.e.c),this.b.a!=d&&(this.d.a=0),this.b.c!=f&&(this.d.c=0),this.b.b!=e?(this.g=-.002/c,this.i=this.g<0):this.i=!1};function Sd(a){
this.a=a,this.b=[],this.c=[],this.d=[]}function Vd(){this.a=this.b=0}function Wd(){this.a=this.b=this.c=0}function Xd(a,b,c){this.a=a,this.b=b,this.c=c,this.d=new Qd,this.e={},this.f=[],this.h=!0}function pd(a){this.a=a,this.b=[]}function qd(a,b){this.a=a,this.b=b,this.c=[],this.d=0}function rd(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.e=!1}function Dd(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}function Ed(){this.a=[],this.b=0}function Fd(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}function ud(){var f=this;if(f.a=0,f.b=0,f.c=null,f.d=65537,f.e=[],f.f=!1,f.h=null,f.g=[0,0,0,0],f.i=2,f.j=null,f.m=!0,f.l=1,f.k=null,f.o=0,f.r=null,f.q=0,f.u=65537,f.p=0,f.t=null,f.D=[0,0,0,0],f.B=0,f.x=null,f.k=_c(G.createElement('canvas'),{alpha:!1,antialias:!1,preserveDrawingBuffer:!1,stencil:!1}),!f.k)throw new Error('Could not initialize WebGL');var a=function(){return f.k.getExtension('OES_standard_derivatives')},b=f.k.canvas,c=b.style;b.width=b.height=0,c.display='block',c.left=c.top='0',c.width=c.height='100%',w(b,
'webglcontextlost',function(d){W(d)}),w(b,'webglcontextrestored',function(){a(),f.a=0,f.f=!1,f.m=!0,f.l=f.l+1|0;for(var h=0,g=f.e,i=g.length;h<i;h=h+1|0){var e=g[h];e()}}),f.c={0:0,1:1,2:768,3:774,4:769,5:775,6:770,7:772,8:771,9:773,10:32769,11:32770},f.j={0:9728,1:9729,2:9987},a(),f.x=new Cd(f,bd,1,1,new Uint8Array(4))}function vd(a,b){this.a=a,this.b=b,this.c=0,this.d=null,this.e=!0}function wd(a,b){vd.call(this,a,b),this.f=0}md(wd,vd);wd.prototype.Fb=function(){var a=this.a.a;(this.c^a.l||this.e)&&(a.k.uniform1f(qa(this),this.f),this.e=!1)};function xd(a,b){vd.call(this,a,b),this.h=this.g=this.i=this.j=0}md(xd,vd);xd.prototype.Fb=function(){var a=this.a.a;(this.c^a.l||this.e)&&(a.k.uniform4f(qa(this),this.h,this.g,this.i,this.j),this.e=!1)};function yd(a,b){vd.call(this,a,b),this.m=new Md}md(yd,vd);yd.prototype.Fb=function(){var a=this.a.a,b=this.m;(this.c^a.l||this.e)&&(K[0]=b.a,K[1]=b.e,K[2]=b.i,K[3]=b.k,K[4]=b.b,K[5]=b.f,K[6]=b.j,K[7]=b.o,K[8]=b.c,K[9]=b.h,K[10]=b.m,K[11]=b.r,K[12]=b.d,K[13]=b.g,K[14]=b.l,
K[15]=b.q,a.k.uniformMatrix4fv(qa(this),!1,K),this.e=!1)};function zd(a,b){vd.call(this,a,b),this.l=null,this.k=-1}md(zd,vd);zd.prototype.Fb=function(){var a=this.a.a,b=this.l,c=a.k;b||(b=a.x),(this.c^a.l||this.e)&&(c.uniform1i(qa(this),this.k),this.e=!1),c.activeTexture(33984+this.k|0),c.bindTexture(3553,lb(b))};function Ad(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.e=Ab(null),this.f=[],this.h=0,this.g=null}function Bd(a,b){this.b=0,this.c=this.d=null,this.e=!0,this.f=2147483647,this.h=0,this.g=2147483647,this.i=0,this.a=a,this.j=b,this.d=new Uint8Array(b)}function Cd(a,b,c,d,e){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=this.h=null,this.g=0,this.i=this.j=!0}function Id(a,b,c,d,e){this.a=null,this.b=a,this.c=b,this.d=c,this.e=d,this.f=e}function Jd(a,b,c){this.a=a,this.b=b,this.c=c}function Td(a,b,c,d,e){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e}function Ud(a){this.a=a}function Yd(a,b,c){this.a=a,this.b=b,this.c=c,this.d=new Uint8Array(512),this.e=new Pd,this.f=0,this.h=this.g=null}var yb,Oa=this.window,G=this.document,Rb=da(new Ed,
'c',0,3),ab=da(da(da(da(new Ed,'c',0,3),'q',1,4),'p',1,4),'k',1,4),$c=new Fd(0,1,1,0),ad=new Fd(1,1,1,1),bd=new Fd(1,0,0,1),K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],qc=new Id(.0393,.0639,[60,60,60,60],.035,[.33582565,.5534879]),cd=new Jd(.11,.062,.004),dd=new Jd(.133,.074,.004),ed=new Jd(.121,.068,.003),fd=new Jd(.075,.05,.0045),gd=new Jd(.089,.05,.0045),Bb=new Jd(.104,.058,.005),hd=new Jd(.112,.068,.005),N=new td,id=new Md,ea=new Md,ld=new Wd;Ld()})();
