(function(){var Hb=Object.create||function(a){return{__proto__:a}};function Fd(a,b){a.prototype=Hb(b.prototype),a.prototype.constructor=a}var Gd=Math.imul||function(a,b){return (a*(b>>>16)<<16)+a*(b&65535)|0};var va;function ib(a,b){var c=URL.createObjectURL(new Blob([b])),d=H.createElement('a');H.body.appendChild(d),d.download=a,d.href=c,d.click(),H.body.removeChild(d),setTimeout(function(){URL.revokeObjectURL(c)},1000)}function ee(){var a=new XMLHttpRequest;a.open('GET','level.lvl'),a.responseType='arraybuffer',a.onload=function(){Jc(new Uint8Array(a.response))},a.send()}function Jc(a){var b=null;try{b=new Nd}catch(Ba){throw Ba}finally{b||alert('Could not initialize WebGL')}var c=H.body,d=b.k.canvas,e=d.style,f=new Hd(b,a),g={},h=Db(),j=function(){var i=innerWidth,m=innerHeight,l=devicePixelRatio;Tb(b,Math.round(i*l)|0,Math.round(m*l)|0)},k=function(){var o=Db(),r=(I(g,39,0)|I(g,68,0))-(I(g,37,0)|I(g,65,0))|0,p=(I(g,40,0)|I(g,83,0))-(I(g,38,0)|I(g,87,0))|0;D(f.o.a,r,0,p),f.C=md(Xa),ec(f,(o-h)/1000),dc(f),h=o,
requestAnimationFrame(k)},u=function(q){ca(q),f.o.b=Ya(q.touches).length!=0,pd(d)},t=function(A,v){ca(A),$b(f,v,A.shiftKey)},w=null,G=function(ea){w&&w.parentNode.removeChild(w),w=H.createElement('input'),w.type='file',z(w,'change',function(V){var pa=Ya(w.files);if(pa.length==1){var fa=new FileReader;fa.onload=function(){ea(new Uint8Array(fa.result))},fa.readAsArrayBuffer(pa[0])}}),c.appendChild(w),w.click()};e.position='fixed',e.left=e.top='0',e.width=e.height='100%',c.appendChild(d),z(H,'keydown',function(E){var C=E.which,Za=E.shiftKey;g[C]=1,!E.ctrlKey&&!E.metaKey?C>64&&C<91?t(E,C-58|0):C>47&&C<58?t(E,C-15|0):C==8||C==49?t(E,0):C^37?C^38?C^39?C^40||t(E,6):t(E,5):t(E,4):t(E,3):(C^79?C^83?C^89?C^90||t(E,Za?2:1):t(E,2):(ca(E),fc(f)):(ca(E),G(function(sa){zb(f.f,new Md.nb(sa),0)})),g={})}),z(H,'keyup',function(bb){g[bb.which]=0}),z(Xa,'blur',function(Aa){g={},f.o.c=!1}),z(H,'mousedown',function(cb){ca(cb),Eb(H)!=d?qd(d):f.o.c=!0}),z(H,'mouseup',function(Gb){f.o.c=!1}),z(H,'mousemove',function(ia){Eb(H)==d&&cc(f,
nd(ia),od(ia))}),z(H,'touchstart',u),z(H,'touchmove',u),z(H,'touchend',u),z(H,'touchcancel',u),z(Xa,'devicemotion',function(db){var R=db.rotationRate,Ga=R?R.alpha:null,ja=R?R.beta:null,Ha=R?R.gamma:null;Ga!==null&&ja!==null&&Ha!==null&&bc(f,Ga,ja,Ha)}),z(Xa,'deviceorientation',function(Ia){var ta=Ia.alpha,ua=Ia.beta,Ja=Ia.gamma;ta!==null&&ua!==null&&Ja!==null&&ac(f,ta,ua,Ja)}),z(Xa,'resize',function(){j()}),j(),k()}function $b(d,a,b){if(a^22)d.i.Pb(a,b);else{var c=d.i._a();d.i=d.i instanceof Cd?d.h:d.j,d.i.Ob(c),d.g.style.display=d.i instanceof Dd?'none':'block'}}function ac(d,a,b,c){d.A=a,d.w=b,d.ea=c,d.pa=!0}function bc(d,a,b,c){d.v=a,d.G=b,d.V=c}function cc(c,a,b){c.E+=a*.005,c.E-=Math.floor(c.E/6.283185307179586)*6.283185307179586,c.fa=Xb(c.fa+b*.005,-1.5707963267948966,1.5707963267948966)}function dc(a){a.k=a.C==0?a.m:a.l||(a.l=new ae(a.a,a,a.b)),a.k.Nb()}function Da(e,a,b,c){var d=e.i._a();B(B(B(B(xa(e.p),ya(Y,a^1?a^2?0:-.1:.1,0,0)),ya(Y,0,0,-10)),e.t),ya(Y,-d.a,-d.b,-d.c)),Fa(c,'s',e.c,0),Fa(c,'D',e.d,1),
ra(c,'f',e.p),ra(c,'x',b),ha(c,'l',e.t.j,e.t.i,e.t.m,d.a*e.t.j+d.b*e.t.i+d.c*e.t.m+10-3),D(e.q,d.a+e.t.j*10,d.b+e.t.i*10,d.c+e.t.m*10),e.i.Qb(e.e),fd(e.f,c,e.q,e.t),Ic(e.e,c)}function ec(b,a){b.pa?(b.A+=b.v*a,b.w+=b.G*a,b.ea+=b.V*a,B(B(B(B(B(xa(b.t),T(Y,0,0,1,b.C*.017453292519943295)),T(Y,0,1,0,-b.ea*.017453292519943295)),T(Y,1,0,0,-b.w*.017453292519943295)),T(Y,0,0,1,-b.A*.017453292519943295)),T(Y,1,0,0,1.5707963267948966))):B(B(xa(b.t),T(Y,1,0,0,b.fa)),T(Y,0,1,0,b.E)),b.i.Rb(b.o,b.t,a),b.r=b.r*.9+.1/a,Xa.top.document.title=b.r.toFixed(1)+'fps'}function fc(a){ib('level.lvl',S(gd(a.f))),ib('lightmap.png',hd(a.f))}function la(g,a,b){if(!b.length)return null;for(var c=a.b,h=0,j=g.b,i=j.length;h<i;h=h+1|0){var d=j[h],e=kb(d,c,b);if(e)return e}var f=new Jd(g,new Vd(g.a,1<<22));return g.b.push(f),kb(f,c,b)}function jb(f,a,b){for(var c=[],d=(1<<22)-((1<<22)%a.b|0)|0,e=0;e<b.length;)c.push(la(f,a,b.subarray(e,e+d|0))),e=e+d|0;return c}function kb(i,a,b){var c=b.length,d=i.c,e=null;if((i.d+c|0)<=1<<22){for(;d.length&&fb(d).e;)d.pop();
if(d.length){var f=fb(d),g=Ka(f.d+f.b|0,a);(g+c|0)<=1<<22&&(e=new Kd(i,c,a,g))}if(!e){var h=0;Yb(d,function(j){return j.e?!0:(h=Ka(h,j.c),j.d^h&&(Vb(i.b,j.d,h,j.b),j.d=h),h=h+j.b|0,!1)}),h=Ka(h,a),(h+c|0)<=1<<22&&(e=new Kd(i,c,a,h))}e&&(Wb(i.b,b,e.d),i.d=i.d+c|0,d.push(e))}return e}function Ka(a,b){return a+((b-(a%b|0)|0)%b|0)|0}function ma(a){var b;a.e||(a.e=!0,(b=a.a).d=b.d-a.b|0)}function K(d,a,b,c){return d.a.push(new Yd(a,b,c,d.b)),d.b=d.b+Gd(c,b?1:4)|0,d}function Q(f,a,b,c,d,e){f.d=a|b<<8|c<<16|d<<24,f.b=e}function W(f,a,b,c,d){var e=f.g?f.g.g:f.h;e[0]=a,e[1]=b,e[2]=c,e[3]=d}function X(e,a,b,c,d){c&&(La(e),vc(b),wc(c.a.b),oc(e,b.b),mc(e,d),pb(e),nc(e),e.k.drawArrays(a^2?a?4:1:5,c.d/c.c|0,c.b/c.c|0),e.m=!1)}function Sb(f,a,b,c,d,e){La(f),f.k.readPixels(a,b,c,d,6408,5121,e)}function mc(b,a){a==1&&!b.f?(b.f=!0,b.k.enable(2884)):!a&&b.f&&(b.f=!1,b.k.disable(2884))}function Tb(d,a,b){if(d.v^a||d.o^b){var c=d.k.canvas;c.width=a,c.height=b,W(d,0,0,a,b),d.v=a,d.o=b}}function Ea(b,a){La(b),pb(b),b.k.clear((a^2?16384:0)|(a^1?1280:0))}
function ga(e,a,b,c){var d=new Ud(e,a,b,c);return Ma(d),d}function $a(j,a,b){var c=new Wd(j,a,1,1,null);return pc(j,b,function(d,e,f){if(!a.a){for(var g=Gd(d,e),h=0;h<g;h=h+1|0)f[h]=f[h<<2];f=f.subarray(0,g)}ab(c,d,e,f)}),c}function La(e){var a=e.g,b=a?a.g:e.h,c=e.A,d=e.k;(e.m||e.t!=a)&&(d.bindFramebuffer(36160,a&&yc(a)),e.t=a),(e.m||!Zb(c,b))&&(d.viewport(b[0],b[1],b[2],b[3]),c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3])}function pb(j){if(j.m||j.u^j.d||j.p!=j.b){var a=j.k,b=j.d,c=j.u,d=b&255,e=b>>8&255,f=b>>16&255,g=b>>24,h=j.b;b^16777472?((j.m||c==16777472)&&a.colorMask(!0,!0,!0,!0),b^65537?((j.m||c==65537||c==16777472)&&a.enable(3042),a.blendFuncSeparate(j.c[d],j.c[e],j.c[f],j.c[g]),a.blendColor(h,h,h,h)):a.disable(3042)):a.colorMask(!1,!1,!1,!1),j.u=b,j.p=j.b}}function nc(c){var a=c.q,b=c.j;(c.m||a^b)&&(b?((c.m||!a)&&c.k.enable(2929),c.k.depthMask(b==2)):c.k.disable(2929),c.q=b)}function oc(h,a){for(var b=h.k,c=a.a,d=c.length,e=0;e<d;e=e+1|0){var f=c[e],g=f.b==1;b.vertexAttribPointer(e,f.c,g?5121:5126,g,a.b,f.d)}
for(;h.a<d;)b.enableVertexAttribArray(h.a),h.a=h.a+1|0;for(;h.a>d;)h.a=h.a-1|0,b.disableVertexAttribArray(h.a);h.a=d}function pc(h,a,b){var c=new Image;c.onload=function(){var d=c.width,e=c.height,f=h.r||(h.r=Cb(H.createElement('canvas'))),g=f.canvas;g.width=d,g.height=e,f.drawImage(c,0,0),b(d,e,new Uint8Array(f.getImageData(0,0,d,e).data.buffer))},c.src=a}function na(b){var a=b.a.a;return b.c^a.l&&(b.d=a.k.getUniformLocation(Ma(b.a),b.b),b.c=a.l),b.d}function qc(b,a){a!=b.f&&(b.f=a,b.e=!0)}function rc(d,a,b,c){(a!=d.g||b!=d.h||c!=d.j)&&(d.g=a,d.h=b,d.j=c,d.e=!0)}function sc(e,a,b,c,d){(a!=e.i||b!=e.m||c!=e.l||d!=e.k)&&(e.i=a,e.m=b,e.l=c,e.k=d,e.e=!0)}function tc(b,a){Nc(b.o,a)||(Oa(b.o,a),b.e=!0)}function uc(c,a,b){(c.r!=a||c.p^b)&&(c.r=a,c.p=b,c.e=!0)}function qa(d,a,b){var c=ka(d.e,a,null);c||(c=new Pd(d,a),d.e[a]=c,d.f.push(c)),qc(c,b)}function Ub(f,a,b,c,d){var e=ka(f.e,a,null);e||(e=new Qd(f,a),f.e[a]=e,f.f.push(e)),rc(e,b,c,d)}function ha(g,a,b,c,d,e){var f=ka(g.e,a,null);f||(f=new Rd(g,a),g.e[a]=f,g.f.push(f)),
sc(f,b,c,d,e)}function ra(d,a,b){var c=ka(d.e,a,null);c||(c=new Sd(d,a),d.e[a]=c,d.f.push(c)),tc(c,b)}function Fa(e,a,b,c){var d=ka(e.e,a,null);d||(d=new Td(e,a),e.e[a]=d,e.f.push(d)),uc(d,b,c)}function Ma(d){var a=d.a.k;if(d.g^d.a.l){d.h=a.createProgram(),qb(d,a,35633,d.c),qb(d,a,35632,d.d);for(var b=d.b.a,c=0,e=b.length;c<e;c=c+1|0)a.bindAttribLocation(d.h,c,b[c].a);if(a.linkProgram(d.h),!a.getProgramParameter(d.h,35714))throw new Error(a.getProgramInfoLog(d.h));d.g=d.a.l}return d.h}function vc(b){b.a.k.useProgram(Ma(b));for(var c=0,d=b.f,e=d.length;c<e;c=c+1|0){var a=d[c];a.Mb()}}function qb(e,a,b,c){var d=a.createShader(b);if(a.shaderSource(d,c),a.compileShader(d),!a.getShaderParameter(d,35713))throw new Error(a.getShaderInfoLog(d));a.attachShader(e.h,d)}function Vb(d,a,b,c){a^b&&c&&(d.d.set(d.d.subarray(a,d.i),b),rb(d,Math.min(a,b),Math.max(a,b)+c|0))}function Wb(c,a,b){c.d.set(a,b),rb(c,b,b+a.length|0)}function wc(b){var a=b.a.k;b.b^b.a.l&&(b.c=a.createBuffer(),b.b=b.a.l,b.e=!0),a.bindBuffer(34962,b.c),b.e&&(a.bufferData(34962,
b.i,35048),b.f=b.h,b.g=b.j,b.e=!1),b.f<b.g&&(a.bufferSubData(34962,b.f,b.d.subarray(b.f,b.g)),b.f=2147483647,b.g=0)}function rb(c,a,b){c.f=Math.min(c.f,a),c.g=Math.max(c.g,b),c.h=Math.min(c.h,a),c.j=Math.max(c.j,b)}function ab(d,a,b,c){(a^d.c||b^d.d||c)&&(d.c=a,d.d=b,d.e=c,d.i=!0)}function sb(c){var a=c.a.k;if(c.h^c.a.l&&(c.g=a.createTexture(),c.h=c.a.l,c.j=c.i=!0),c.j&&(a.bindTexture(3553,c.g),a.texParameteri(3553,10240,c.a.i[c.b.c]),a.texParameteri(3553,10241,c.a.i[c.b.b]),a.texParameteri(3553,10242,c.b.d?33071:10497),a.texParameteri(3553,10243,c.b.d?33071:10497),c.j=!1),c.i){var b=c.b.a?6408:6409;a.bindTexture(3553,c.g),a.texImage2D(3553,0,b,c.c,c.d,0,b,5121,c.e),c.b.b^2||a.generateMipmap(3553),c.i=!1}return c.g}function xc(b){var a=b.a.k;return b.h^b.a.l&&(b.f=a.createRenderbuffer(),b.h=b.a.l,b.i=!0),b.i&&(a.bindRenderbuffer(36161,b.f),a.renderbufferStorage(36161,34041,b.c,b.d),b.i=!1),b.f}function yc(b){var a=b.a.k;return b.e^b.a.l&&(b.d=a.createFramebuffer(),b.e=b.a.l,b.f=!0),b.f&&(a.bindFramebuffer(36160,
b.d),a.framebufferTexture2D(36160,36064,3553,sb(b.b),0),b.c&&a.framebufferRenderbuffer(36160,33306,36161,xc(b.c)),b.f=!1),b.d}function lb(a){return a.a+a.d*.5}function gc(a){return a.b+a.e*.5}function mb(a){return a.c+a.f*.5}function hc(e,a,b,c,d){ic(e,a,b),jc(e,a,c),kc(e,a,d)}function ic(k,a,b){var c=Math.floor(k.a)|0,d=Math.floor(k.b)|0,e=Math.floor(k.c)|0,f=(Math.ceil(k.a+k.d)|0)-1|0,g=(Math.ceil(k.b+k.e)|0)-1|0,h=(Math.ceil(k.c+k.f)|0)-1|0;if(k.a+=b,b<0){for(var j=Math.floor(k.a)|0,i=c-1|0;i>=j;i=i-1|0)if(!aa(a,i,d,e,i,g,h)){k.a=1.001+i;break}}else if(b>0)for(var m=(Math.ceil(k.a+k.d)|0)-1|0,l=f+1|0;l<=m;l=l+1|0)if(!aa(a,l,d,e,l,g,h)){k.a=l-k.d-.001;break}}function jc(k,a,b){var c=Math.floor(k.a)|0,d=Math.floor(k.b)|0,e=Math.floor(k.c)|0,f=(Math.ceil(k.a+k.d)|0)-1|0,g=(Math.ceil(k.b+k.e)|0)-1|0,h=(Math.ceil(k.c+k.f)|0)-1|0;if(k.b+=b,b<0){for(var j=Math.floor(k.b)|0,i=d-1|0;i>=j;i=i-1|0)if(!aa(a,c,i,e,f,i,h)){k.b=1.001+i;break}}else if(b>0)for(var m=(Math.ceil(k.b+k.e)|0)-1|0,l=g+1|0;l<=m;l=l+1|0)if(!aa(a,c,
l,e,f,l,h)){k.b=l-k.e-.001;break}}function kc(k,a,b){var c=Math.floor(k.a)|0,d=Math.floor(k.b)|0,e=Math.floor(k.c)|0,f=(Math.ceil(k.a+k.d)|0)-1|0,g=(Math.ceil(k.b+k.e)|0)-1|0,h=(Math.ceil(k.c+k.f)|0)-1|0;if(k.c+=b,b<0){for(var j=Math.floor(k.c)|0,i=e-1|0;i>=j;i=i-1|0)if(!aa(a,c,d,i,f,g,i)){k.c=1.001+i;break}}else if(b>0)for(var m=(Math.ceil(k.c+k.f)|0)-1|0,l=h+1|0;l<=m;l=l+1|0)if(!aa(a,c,d,l,f,g,l)){k.c=l-k.f-.001;break}}function S(a){return a.a.subarray(0,a.c)}function n(b,a){return wa(b,4),b.b[b.c>>2]=a,b.c=b.c+4|0,b}function M(b,a){return wa(b,4),b.a[b.c]=a&255,b.a[b.c+1|0]=a>>8&255,b.a[b.c+2|0]=a>>16&255,b.a[b.c+3|0]=a>>>24,b.c=b.c+4|0,b}function x(b,a){return wa(b,1),b.a[b.c]=a,b.c=b.c+1|0,b}function N(b,a){return wa(b,4),b.a[b.c]=a,b.a[b.c+1|0]=a>>8,b.a[b.c+2|0]=a>>16,b.a[b.c+3|0]=a>>24,b.c=b.c+4|0,b}function ob(b){var a=b.a[b.d];return b.d=b.d+1|0,a}function O(b){var a=b.a[b.d]|b.a[b.d+1|0]<<8|b.a[b.d+2|0]<<16|b.a[b.d+3|0]<<24;return b.d=b.d+4|0,a}function lc(b){var a=b.a[b.d]|b.a[b.d+1|0]<<8|b.a[b.d+2|0]<<16|b.a[b.d+3|0]<<24;
return b.d=b.d+4|0,a}function s(b){var a=b.b[b.d>>2];return b.d=b.d+4|0,a}function wa(d,a){if(!d.a||(d.c+a|0)>d.a.length){var b=new Float32Array((d.c+a<<1)+3>>2),c=new Uint8Array(b.buffer);d.a&&c.set(d.a),d.b=b,d.a=c}}function Ac(a){for(var b=new Md,c=new pe,d=new pe,e=0;e<8;e=e+1|0)for(var f=0;f<9;f=f+1|0){var g=f*.125,h=.05+g*.9,j=g*3-1,i=e<4?1:0;e?e^1?e^2?e^3?e^4?e^5?e^6?(y(c,-1,j),y(d,0,g)):(y(c,2,j),y(d,1,g)):(y(c,j,-1),y(d,g,0)):(y(c,j,2),y(d,g,1)):(y(c,.05,h),y(d,0,g)):(y(c,.95,h),y(d,1,g)):(y(c,h,.05),y(d,g,0)):(y(c,h,.95),y(d,g,1)),a(c),a(d),n(b,c.a*2-1),n(b,c.b*2-1),n(b,i),f||(n(b,c.a*2-1),n(b,c.b*2-1),n(b,i)),n(b,d.a*2-1),n(b,d.b*2-1),n(b,0),f^8||(n(b,d.a*2-1),n(b,d.b*2-1),n(b,0))}return b}function tb(a){return a.a||(a.a=Cc(a.f)),a.a}function ub(){var a=navigator.userAgent,b=screen.width,c=screen.height,d=b<c?b:c,e=b<c?c:b;return~a.indexOf('iPhone')?d==480&&e==320?yd:d==568&&e==320?zd:d==667&&e==375?Ib:d==736&&e==414?Ad:null:~a.indexOf('Nexus 5')?vd:~a.indexOf('Nexus 6')?wd:~a.indexOf('LG-')?xd:null}
function J(a,b){for(var c=a.length,d=b*b,e=0,f=0;f<c;f=f+1|0)e=d*(e+a[(c-f|0)-1|0]);return b*(e+1)}function Cc(a){for(var b=[],c=[],d=0;d<100;d=d+1|0){for(var e=(d+1|0)*1/100,f=J(a,e),g=f,h=[],j=0;j<4;j=j+1|0)g*=f*f,h.push(g);b.push(h),c.push(e-f)}return Dc(b,c)}function Dc(a,b){for(var c=a.length,d=a[0].length,e=[],f=0;f<d;f=f+1|0){for(var g=[],h=0;h<d;h=h+1|0){for(var j=0,i=0;i<c;i=i+1|0)j+=a[i][f]*a[i][h];g.push(j)}e.push(g)}for(var m=[],l=0;l<d;l=l+1|0){for(var k=0,o=0;o<c;o=o+1|0)k+=a[o][l]*b[o];m.push(k)}return Ec(e,m)}function Ec(a,b){for(var c=a.length,d=0,k=c-1|0;d<k;d=d+1|0)for(var e=d+1|0;e<c;e=e+1|0){for(var f=a[e],g=f[d]/a[d][d],h=d+1|0;h<c;h=h+1|0)f[h]=f[h]-g*a[d][h];b[e]=b[e]-g*b[d]}var j=[];eb(j,c,0);for(var i=c-1|0;i>-1;i=i-1|0){for(var m=b[i],l=i+1|0;l<c;l=l+1|0)m-=a[i][l]*j[l];j[i]=m/a[i][i]}return j}function Na(a,b){return a.e-b.c-b.b/2}function Fc(a,b){var c=Math.tan(-a.d[0]*.017453292519943295),d=Math.tan(a.d[3]*.017453292519943295),e=Math.tan(a.d[1]*.017453292519943295),f=Math.tan(-a.d[2]*.017453292519943295),g=b.a/4,h=b.b/2,j=a.c/2-g,i=-Na(a,
b),m=a.b,l=J(a.f,(j-g)/m),k=J(a.f,(i+h)/m),o=J(a.f,(j+g)/m),r=J(a.f,(i-h)/m);return[Math.max(c,l),Math.min(d,k),Math.min(e,o),Math.max(f,r)]}function Gc(a,b){var c=tb(a),d=J(c,Math.tan(-a.d[0]*.017453292519943295)),e=J(c,Math.tan(a.d[3]*.017453292519943295)),f=J(c,Math.tan(a.d[1]*.017453292519943295)),g=J(c,Math.tan(-a.d[2]*.017453292519943295)),h=b.a/4,j=b.b/2,i=a.c/2-h,m=-Na(a,b),l=a.b,k=(i-h)/l,o=(m+j)/l,r=(i+h)/l,p=(m-j)/l;return[Math.max(d,k),Math.min(e,o),Math.min(f,r),Math.max(g,p)]}function Hc(a,b,c){var d=a.b,e=(b.a-a.c)/2,f=Na(a,b)+b.b/2,g=(c[0]*d+e)/b.a,h=(c[1]*d+f)/b.b,j=(c[2]*d+e)/b.a,i=(c[3]*d+f)/b.b;return[g,i,j-g,h-i]}function F(h,a,b,c,d,e,f,g){n(P,a),n(P,b),n(P,c),M(P,0),M(P,0),M(P,0),n(P,d),n(P,e),n(P,f),M(P,0),M(P,0),M(P,0)}function vb(h,a,b,c,d,e,f,g){F(h,a,b,c,d,b,c,g),F(h,a,b,c,a,e,c,g),F(h,a,b,c,a,b,f,g),F(h,d,b,c,d,e,c,g),F(h,a,e,c,a,e,f,g),F(h,a,b,f,d,b,f,g),F(h,d,b,c,d,b,f,g),F(h,a,e,c,d,e,c,g),F(h,a,b,f,a,e,f,g),F(h,d,e,f,a,e,f,g),F(h,d,e,f,d,b,f,g),F(h,d,e,f,d,e,c,g)}function Ic(c,a){
if(P.c){var b=la(c.b,a.b,S(P));X(c.a,0,a,b,0),ma(b),P.c=0}}function Kc(f,a){var b=a.a,c=a.b,d=a.c,e=1/(f.k*b+f.o*c+f.r*d+f.p);a.a=(f.a*b+f.b*c+f.c*d+f.d)*e,a.b=(f.e*b+f.f*c+f.g*d+f.h)*e,a.c=(f.j*b+f.i*c+f.m*d+f.l)*e}function xa(a){return Oa(a,Bd),a}function Oa(b,a){return b.a=a.a,b.b=a.b,b.c=a.c,b.d=a.d,b.e=a.e,b.f=a.f,b.g=a.g,b.h=a.h,b.j=a.j,b.i=a.i,b.m=a.m,b.l=a.l,b.k=a.k,b.o=a.o,b.r=a.r,b.p=a.p,b}function ya(d,a,b,c){return d.d=a,d.h=b,d.l=c,d.a=d.f=d.m=d.p=1,d.b=d.c=d.e=d.g=d.j=d.i=d.k=d.o=d.r=0,d}function Lc(d,a,b,c){return d.a=a,d.f=b,d.m=c,d.p=1,d.b=d.c=d.d=d.e=d.g=d.h=d.j=d.i=d.l=d.k=d.o=d.r=0,d}function T(h,a,b,c,d){var e=Math.cos(d),f=Math.sin(d),g=1-e;return h.a=a*a*g+e,h.b=a*b*g-c*f,h.c=a*c*g+b*f,h.e=b*a*g+c*f,h.f=b*b*g+e,h.g=b*c*g-a*f,h.j=c*a*g-b*f,h.i=c*b*g+a*f,h.m=c*c*g+e,h.p=1,h.d=h.h=h.l=h.k=h.o=h.r=0,h}function Mc(g,a,b,c,d){var e=Math.tan(a/2)*c,f=e*b;return wb(g,-f,f,-e,e,c,d)}function wb(g,a,b,c,d,e,f){return g.a=e*2/(b-a),g.c=(b+a)/(b-a),g.f=e*2/(d-c),g.g=(d+c)/(d-c),g.m=-(f+e)/(f-e),g.l=f*-2*e/(f-e),
g.r=-1,g.b=g.d=g.e=g.h=g.j=g.i=g.k=g.o=g.p=0,g}function B(q,a){var b=q.a,c=q.b,d=q.c,e=q.d,f=q.e,g=q.f,h=q.g,j=q.h,i=q.j,m=q.i,l=q.m,k=q.l,o=q.k,r=q.o,p=q.r,u=q.p;return q.a=b*a.a+c*a.e+d*a.j+e*a.k,q.b=b*a.b+c*a.f+d*a.i+e*a.o,q.c=b*a.c+c*a.g+d*a.m+e*a.r,q.d=b*a.d+c*a.h+d*a.l+e*a.p,q.e=f*a.a+g*a.e+h*a.j+j*a.k,q.f=f*a.b+g*a.f+h*a.i+j*a.o,q.g=f*a.c+g*a.g+h*a.m+j*a.r,q.h=f*a.d+g*a.h+h*a.l+j*a.p,q.j=i*a.a+m*a.e+l*a.j+k*a.k,q.i=i*a.b+m*a.f+l*a.i+k*a.o,q.m=i*a.c+m*a.g+l*a.m+k*a.r,q.l=i*a.d+m*a.h+l*a.l+k*a.p,q.k=o*a.a+r*a.e+p*a.j+u*a.k,q.o=o*a.b+r*a.f+p*a.i+u*a.o,q.r=o*a.c+r*a.g+p*a.m+u*a.r,q.p=o*a.d+r*a.h+p*a.l+u*a.p,q}function Nc(b,a){return b.a==a.a&&b.b==a.b&&b.c==a.c&&b.d==a.d&&b.e==a.e&&b.f==a.f&&b.g==a.g&&b.h==a.h&&b.j==a.j&&b.i==a.i&&b.m==a.m&&b.l==a.l&&b.k==a.k&&b.o==a.o&&b.r==a.r&&b.p==a.p}function Oc(d,a){if(d.a=[],(a.d+4|0)>a.c)return!1;var b=O(a);if((a.d+Gd(b,28)|0)>a.c)return!1;for(var c=0;c<b;c=c+1|0)d.a.push(new ge(O(a),s(a),s(a),s(a),s(a),s(a),s(a)));return!0}function Pc(c,a){N(a,c.a.length);for(var d=0,e=c.a,f=e.length;d<f;d=d+1|0){
var b=e[d];N(a,b.a),n(a,b.b),n(a,b.c),n(a,b.d),n(a,b.e),n(a,b.f),n(a,b.g)}}function xb(g,a,b){for(var c=new Md,d=b.a,h=0,j=g.a,i=j.length;h<i;h=h+1|0){var e=j[h],f=d[e.a];(a||!f.w)&&(Pa(g,c,f,e.b,e.c),Pa(g,c,f,e.d,e.e),Pa(g,c,f,e.f,e.g))}return c}function Pa(l,a,b,c,d){var e=b.a+b.g*c+b.i*d,f=b.b+b.h*c+b.m*d,g=b.c+b.j*c+b.l*d,h=(b.k+(b.r-b.k)*c)*65535+.5|0,j=(b.o+(b.p-b.o)*d)*65535+.5|0,i=(b.u+(b.t-b.u)*c)*65535+.5|0,m=(b.q+(b.A-b.q)*d)*65535+.5|0;n(a,e),n(a,f),n(a,g),x(a,h>>8),x(a,h&255),x(a,j>>8),x(a,j&255),x(a,i>>8),x(a,i&255),x(a,m>>8),x(a,m&255),x(a,Math.round(127.5+(b.d-e)*255)|0),x(a,Math.round(127.5+(b.e-f)*255)|0),x(a,Math.round(127.5+(b.f-g)*255)|0),x(a,b.w?0:255)}function Qc(f,a,b){for(var c=a.a,g=0,h=f.a,j=h.length;g<j;g=g+1|0){var d=h[g],e=c[d.a];e.w||(Qa(f,b,e,d.b,d.c),Qa(f,b,e,d.d,d.e),Qa(f,b,e,d.f,d.g))}}function Qa(h,a,b,c,d){var e=b.a+b.g*c+b.i*d,f=b.b+b.h*c+b.m*d,g=b.c+b.j*c+b.l*d;n(a,e),n(a,f),n(a,g)}function Rc(d,a){if(d.a=[],(a.d+12|0)>a.c)return!1;var b=O(a);if((a.d+Gd(b,88)|0)>a.c)return!1;
for(var c=0;c<b;c=c+1|0)d.a.push(new he(s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),s(a),lc(a),!!O(a)));return!0}function Sc(c,a){N(a,c.a.length);for(var d=0,e=c.a,f=e.length;d<f;d=d+1|0){var b=e[d];n(a,b.a),n(a,b.b),n(a,b.c),n(a,b.d),n(a,b.e),n(a,b.f),n(a,b.g),n(a,b.h),n(a,b.j),n(a,b.i),n(a,b.m),n(a,b.l),n(a,b.k),n(a,b.o),n(a,b.r),n(a,b.p),n(a,b.u),n(a,b.q),n(a,b.t),n(a,b.A),M(a,b.v),N(a,b.w|0)}}function Tc(j){var a=H.createElement('canvas'),b=Cb(a);a.width=j.b,a.height=j.c;var c=b.createImageData(j.b,j.c);c.data.set(new Uint8ClampedArray(j.d.buffer,j.d.byteOffset,j.d.length)),b.putImageData(c,0,0);for(var d=a.toDataURL(),e=d.indexOf(','),f=atob(d.slice(e+1|0)),g=new Uint8Array(f.length),h=0,i=f.length;h<i;h=h+1|0)g[h]=f.charCodeAt(h);return g}function Uc(t){for(var a=0,b=1,c=1,A=0,v=t.a,w=v.length;A<w;A=A+1|0){var d=v[A];d.w||(a=a+1|0)}for(;Gd(b/9|0,c/9|0)<a;)b^c?c=c<<1:b=b<<1;for(var e=b/9|0,f=new Uint8Array(b*c<<2),g=0,G=0,ea=t.a,V=ea.length;G<V;G=G+1|0){var h=ea[G];
if(!h.w){var j=h.v,i=j&255,m=j>>8&255,l=j>>16&255,k=j>>>24,o=Gd(g%e|0,9),r=Gd(g/e|0,9);g=g+1|0,h.u=(o+.5)/b,h.q=(r+.5)/c,h.t=((o+9|0)-.5)/b,h.A=((r+9|0)-.5)/c;for(var p=0;p<9;p=p+1|0)for(var u=0;u<9;u=u+1|0){var q=(o+u|0)+Gd(r+p|0,b)<<2;f[q]=i,f[q+1|0]=m,f[q+2|0]=l,f[q+3|0]=k}}}t.b=b,t.c=c,t.d=f}function Vc(c){for(var a=new Md,d=0,e=c.a,f=e.length;d<f;d=d+1|0){var b=e[d];b.w||(Z(c,a,b,0,0),Z(c,a,b,1,0),Z(c,a,b,1,1),Z(c,a,b,0,0),Z(c,a,b,1,1),Z(c,a,b,0,1))}return a}function Z(v,a,b,c,d){var e=b.g,f=b.h,g=b.j,h=b.i,j=b.m,i=b.l,m=b.u*v.b,l=b.q*v.c,k=b.t*v.b,o=b.A*v.c,r=Math.floor(m),p=Math.floor(l),u=Math.ceil(k),q=Math.ceil(o);c=(r+(u-r)*c-m)/(k-m),d=(p+(q-p)*d-l)/(o-l),n(a,b.a+e*c+h*d),n(a,b.b+f*c+j*d),n(a,b.c+g*c+i*d),n(a,f*i-g*j),n(a,g*h-e*i),n(a,e*j-f*h);var t=(m+(k-m)*c)/v.b*65535+.5|0,A=(l+(o-l)*d)/v.c*65535+.5|0;x(a,t>>8),x(a,t&255),x(a,A>>8),x(a,A&255),M(a,b.v)}function Wc(a){a.a.g=a.t,W(a.a,0,0,a.d.b,a.d.c),Sb(a.a,0,0,a.d.b,a.d.c,a.d.d),a.a.g=null}function Xc(e,a,b){if(e.o)for(var f=0,g=e.o,h=g.length;f<h;f=f+1|0){
var c=g[f];ma(c)}if(e.r)for(var j=0,i=e.r,m=i.length;j<m;j=j+1|0){var d=i[j];ma(d)}e.l=a,e.k=b,e.o=jb(e.b,gb,S(a)),e.r=jb(e.b,_b,S(b)),e.p||(e.p=new Wd(e.a,zc,1024,1024,null)),e.u||(e.u=new Wd(e.a,sd,1024,1024,null)),e.q||(e.q=new Xd(e.a,e.p,e.u)),e.t||(e.t=new Xd(e.a,e.c,null)),e.A=ga(e.a,gb,'precision highp float;uniform mat4 f;attribute vec3 d;varying float b;void main(){b=(gl_Position=f*vec4(d,1)).z*.5+.5;}','precision highp float;varying float b;void main(){gl_FragColor=vec4(b);}'),e.v=ga(e.a,_b,'precision highp float;uniform mat4 f;uniform vec3 A;attribute vec3 B,d;attribute vec4 C,j;varying float b;varying vec3 r;varying vec4 u;vec2 g(vec4 a){return a.xz*.996109+a.yw*.003891;}void main(){u=C,b=sqrt(max(0.,dot(A,B))),r=(f*vec4(d,1)).xyz*.5+.5,gl_Position=vec4(g(j)*2.-1.,0,1);}','precision highp float;uniform sampler2D s;varying float b;varying vec3 r;varying vec4 u;void main(){float a=texture2D(s,r.xy).x;gl_FragColor=vec4(u.xyz*(b*float(a+.007843>r.z)),1);}'),e.w=0}function Yc(i){i.G=!i.G,i.G?U(ad(Ta(Ua(i.i),
.05),i.e)):(Ua(i.i),i.i.b<0&&(i.i.b=-i.i.b)),Ua(i.j),U(yb(Sa(i.h,i.j),i.i)),U(yb(Sa(i.j,i.i),i.h)),i.g.a=i.h.a,i.g.b=i.h.b,i.g.c=i.h.c,i.g.e=i.j.a,i.g.f=i.j.b,i.g.g=i.j.c,i.g.j=i.i.a,i.g.i=i.i.b,i.g.m=i.i.c,i.l.d=0;for(var a=Infinity,b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,f=-Infinity,g=0,m=i.l.c/12|0;g<m;g=g+1|0)Kc(i.g,D(i.m,s(i.l),s(i.l),s(i.l))),a=Math.min(a,i.m.a),b=Math.min(b,i.m.b),c=Math.min(c,i.m.c),d=Math.max(d,i.m.a),e=Math.max(e,i.m.b),f=Math.max(f,i.m.c);B(B(B(xa(i.f),Lc(Y,1.99999/(d-a),1.99999/(e-b),1.99999/(c-f))),ya(Y,-(a+d)/2,-(b+e)/2,-(c+f)/2)),i.g),i.a.g=i.q,W(i.a,0,0,1024,1024),Ea(i.a,0),ra(i.A,'f',i.f);for(var l=0,k=i.o,o=k.length;l<o;l=l+1|0){var h=k[l];X(i.a,1,i.A,h,1)}i.a.g=null,Q(i.a,10,11,10,11,1-i.w/(i.w+1)),i.a.g=i.t,W(i.a,0,0,i.c.c,i.c.d),Fa(i.v,'s',i.p,0),Ub(i.v,'A',i.i.a,i.i.b,i.i.c),ra(i.v,'f',i.f);for(var r=0,p=i.r,u=p.length;r<u;r=r+1|0){var j=p[r];X(i.a,1,i.v,j,0)}i.a.g=null,Q(i.a,1,0,1,0,0),i.w=i.w+1|0}function _(e,a,b,c,d){e.h=e.h+a|0,e.j=e.j+b|0,e.i=e.i+c|0,d||(e.m=e.h,
e.l=e.j,e.k=e.i)}function oa(e,a){for(var b=Math.min(e.h,e.m),h=Math.max(e.h,e.m)+1|0;b<h;b=b+1|0)for(var c=Math.min(e.j,e.l),g=Math.max(e.j,e.l)+1|0;c<g;c=c+1|0)for(var d=Math.min(e.i,e.k),f=Math.max(e.i,e.k)+1|0;d<f;d=d+1|0)Zc(e.b,b,c,d,a);Ra(e.b)}function Zc(f,a,b,c,d){var e=za(f.a,a,b,c);e^d&&(f.d.push(new ne(a,b,c,e,d)),Va(f.a,a,b,c,d))}function _c(c){if(Ra(c),c.b.length){for(var a=c.b.pop(),d=0,e=a.a,f=e.length;d<f;d=d+1|0){var b=e[d];Va(c.a,b.a,b.b,b.c,b.d)}c.c.push(a)}}function $c(c){if(Ra(c),c.c.length){for(var a=c.c.pop(),d=0,e=a.a,f=e.length;d<f;d=d+1|0){var b=e[d];Va(c.a,b.a,b.b,b.c,b.e)}c.b.push(a)}}function Ra(a){a.d.length&&(a.b.push(new oe(a.d)),eb(a.c,0,null),a.d=[])}function y(c,a,b){return c.a=a,c.b=b,c}function D(d,a,b,c){return d.a=a,d.b=b,d.c=c,d}function Sa(b,a){return b.a=a.a,b.b=a.b,b.c=a.c,b}function ad(b,a){return b.a+=a.a,b.b+=a.b,b.c+=a.c,b}function yb(e,a){var b=e.b*a.c-e.c*a.b,c=e.c*a.a-e.a*a.c,d=e.a*a.b-e.b*a.a;return e.a=b,e.b=c,e.c=d,e}function bd(b,a){return b.a-=a.a,b.b-=a.b,
b.c-=a.c,b}function Ta(b,a){return b.a*=a,b.b*=a,b.c*=a,b}function cd(a){return a.a*a.a+a.b*a.b+a.c*a.c}function dd(a){return Math.sqrt(a.a*a.a+a.b*a.b+a.c*a.c)}function U(b){var a=dd(b);return a>0&&Ta(b,1/a),b}function Ua(c){c.b=Math.random()*2-1;var a=Math.random()*6.283185307179586,b=Math.sqrt(Math.max(0,1-c.b*c.b));return c.a=Math.cos(a)*b,c.c=Math.sin(a)*b,c}function id(f,a,b,c,d){var e=a|b<<3|c<<6;return f.d[e]^d?(f.d[e]=d,!0):!1}function Wa(b){for(var a=0;a<512;a=a+1|0)if(b.d[a])return!1;return!0}function Bb(a){var c,b;(b=a.g)&&ma(b),(c=a.h)&&ma(c),a.g=a.h=null}function jd(c,a,b){return c.g||(c.g=la(a,hb,S(xb(c.e,1,b)))),c.g}function kd(c,a,b){return c.h||(c.h=la(a,hb,S(xb(c.e,0,b)))),c.h}function ld(da,a){da.e.a=[],Bb(da);for(var b=da.a,c=da.b,d=da.c,e=da.d,f=0;f<8;f=f+1|0)for(var g=c+f|0,h=0;h<8;h=h+1|0)for(var j=b+h|0,i=0;i<8;i=i+1|0){var m=d+i|0,l=e[h|f<<3|i<<6];l&&ba(da,a,j,g,m,j+.5,g+.5,m+.5,1,0,0,0,0,1,$(l),f>0&&e[h|f-1<<3|i<<6]!=0)}for(var k=0;k<8;k=k+1|0)for(var o=k^7,r=(c+o|0)+1|0,p=0;p<8;p=p+1|0)for(var u=b+p|0,q=0;q<8;q=q+1|0){
var t=d+q|0,A=e[p|o<<3|q<<6];A&&ba(da,a,u,r,t,u+.5,r-.5,t+.5,0,0,1,1,0,0,$(A),o<7&&e[p|o+1<<3|q<<6]!=0)}for(var v=0;v<8;v=v+1|0)for(var w=b+v|0,G=0;G<8;G=G+1|0)for(var ea=c+G|0,V=0;V<8;V=V+1|0){var pa=d+V|0,fa=e[v|G<<3|V<<6];fa&&ba(da,a,w,ea,pa,w+.5,ea+.5,pa+.5,0,0,1,0,1,0,$(fa),v>0&&e[v-1|G<<3|V<<6]!=0)}for(var E=0;E<8;E=E+1|0)for(var C=E^7,Za=(b+C|0)+1|0,sa=0;sa<8;sa=sa+1|0)for(var bb=c+sa|0,Aa=0;Aa<8;Aa=Aa+1|0){var cb=d+Aa|0,Gb=e[C|sa<<3|Aa<<6];Gb&&ba(da,a,Za,bb,cb,Za-.5,bb+.5,cb+.5,0,1,0,0,0,1,$(Gb),C<7&&e[C+1|sa<<3|Aa<<6]!=0)}for(var ia=0;ia<8;ia=ia+1|0)for(var db=d+ia|0,R=0;R<8;R=R+1|0)for(var Ga=b+R|0,ja=0;ja<8;ja=ja+1|0){var Ha=c+ja|0,Ia=e[R|ja<<3|ia<<6];Ia&&ba(da,a,Ga,Ha,db,Ga+.5,Ha+.5,db+.5,0,1,0,1,0,0,$(Ia),ia>0&&e[R|ja<<3|ia-1<<6]!=0)}for(var ta=0;ta<8;ta=ta+1|0)for(var ua=ta^7,Ja=(d+ua|0)+1|0,Ba=0;Ba<8;Ba=Ba+1|0)for(var Jb=b+Ba|0,Ca=0;Ca<8;Ca=Ca+1|0){var Kb=c+Ca|0,Lb=e[Ba|Ca<<3|ua<<6];Lb&&ba(da,a,Jb,Kb,Ja,Jb+.5,Kb+.5,Ja-.5,1,0,0,0,1,0,$(Lb),ua<7&&e[Ba|Ca<<3|ua+1<<6]!=0)}}function ba(t,a,b,c,d,e,f,g,h,j,i,m,l,k,o,r){
var p=(b*h+c*j+d*i)/3,u=(b*m+c*l+d*k)/3,q=a.a.length;p-=Math.floor(p),u-=Math.floor(u),a.a.push(new he(b,c,d,e,f,g,h,j,i,m,l,k,p,u,p+1/3,u+1/3,0,0,0,0,o,r)),t.e.a.push(new ge(q,0,0,1,0,1,1)),t.e.a.push(new ge(q,0,0,1,1,0,1))}function aa(m,a,b,c,d,e,f){for(var g=c;g<=f;g=g+1|0)for(var h=b;h<=e;h=h+1|0)for(var j=a;j<=d;j=j+1|0){var i=za(m,j,h,g);if(i&&i^4)return!1}return!0}function za(e,a,b,c){var d=I(e.f,a>>3&2047|b<<8&2095104|c<<18&-2097152,null);return d?d.d[a&7|(b&7)<<3|(c&7)<<6]:0}function Va(h,a,b,c,d){var e=a>>3&2047|b<<8&2095104|c<<18&-2097152,f=h.f,g=I(f,e,null);!g&&d&&Ab(a,b,c)&&(g=new se(a&-8,b&-8,c&-8),f[e]=g,h.g.push(g)),g&&id(g,a&7,b&7,c&7,d)&&(h.h=!0)}function ed(d){if(d.h){for(var e=0,f=d.g,g=f.length;e<g;e=e+1|0){var a=f[e];ld(a,d.d)}Uc(d.d),ab(d.c,d.d.b,d.d.c,d.d.d),d.h=!1;for(var b=new Md,h=0,j=d.g,i=j.length;h<i;h=h+1|0){var c=j[h];Qc(c.e,d.d,b)}d.e||(d.e=new ke(d.a,d.b,d.c,d.d,U(D(new qe,2,3,1)))),Xc(d.e,b,Vc(d.d))}}function fd(k,a,b,c){ed(k),k.e&&Yc(k.e);for(var o=0,r=k.g,p=r.length;o<p;o=o+1|0){
var d=r[o];d.f=cd(bd(D(Ed,d.a+4,d.b+4,d.c+4),b))}for(var e=k.g.length,f=1;f<e;f=f+1|0){for(var g=k.g[f],h=f-1|0;h>-1&&k.g[h].f>g.f;)k.g[h+1|0]=k.g[h],h=h-1|0;k.g[h+1|0]=g}for(var j=Math.sqrt(3)*4,i=c.j*b.a+c.i*b.b+c.m*b.c,u=0,q=k.g,t=q.length;u<t;u=u+1|0){var m=q[u],l=c.j*(m.a+4)+c.i*(m.b+4)+c.m*(m.c+4);l-j>i||X(k.a,1,a,l+j+3<i?kd(m,k.b,k.d):jd(m,k.b,k.d),1)}}function zb(k,a,b){for(var c=0,o=16;c<o;c=c+1|0)if((a.d+1|0)>a.c||'webglvrlevel\x01\0\0\0'.charCodeAt(c)^ob(a))return!1;if((a.d+4|0)>a.c)return!1;var d=O(a);if((a.d+Gd(d,524)|0)>a.c)return!1;for(var r=0,p=k.g,u=p.length;r<u;r=r+1|0){var e=p[r];Bb(e)}for(k.f={},k.g=[],k.h=!0;d>0;){var f=O(a)<<3,g=O(a)<<3,h=O(a)<<3;if(!Ab(f,g,h))return!1;var j=new se(f,g,h),i=f>>3&2047|g<<8&2095104|h<<18&-2097152;if(i in k.f)return!1;for(var m=0;m<512;m=m+1|0)j.d[m]=ob(a);k.f[i]=j,k.g.push(j),d=d-1|0}if(b==1){if(!Rc(k.d,a))return!1;for(var q=0,t=k.g,A=t.length;q<A;q=q+1|0){var l=t[q];if(!Oc(l.e,a))return!1}k.h=!1}return!0}function gd(h){for(var a=new Md,b=0,j=0,i=h.g,m=i.length;j<m;j=j+1|0){
var c=i[j];Wa(c)||(b=b+1|0)}for(var d=0,l=16;d<l;d=d+1|0)x(a,'webglvrlevel\x01\0\0\0'.charCodeAt(d));N(a,b);for(var k=0,o=h.g,r=o.length;k<r;k=k+1|0){var e=o[k];if(!Wa(e)){N(a,e.a>>3),N(a,e.b>>3),N(a,e.c>>3);for(var f=0;f<512;f=f+1|0)x(a,e.d[f])}}Sc(h.d,a);for(var p=0,u=h.g,q=u.length;p<q;p=p+1|0){var g=u[p];Wa(g)||Pc(g.e,a)}return a}function hd(a){return a.e&&Wc(a.e),Tc(a.d)}function Ab(a,b,c){return a==a<<18>>18&&b==b<<19>>19&&c==c<<18>>18}function Ya(a){for(var b=[],c=0,d=a.length;c<d;c=c+1|0)b.push(a[c]);return b}function z(a,b,c){a.addEventListener(b,c)}function ca(a){a.preventDefault()}function eb(c,a,b){for(;c.length<a;)c.push(b);for(;c.length>a;)c.pop()}function fb(a){return a[a.length-1|0]}function Yb(d,a){for(var b=0,c=0,e=d.length;c<e;c=c+1|0)a(d[c])||(b<c&&(d[b]=d[c]),b=b+1|0);for(;b<d.length;)d.pop()}function Zb(c,a){if(c.length^a.length)return!1;for(var b=0,d=c.length;b<d;b=b+1|0)if(c[b]!=a[b])return!1;return!0}function ka(d,a,b){var c=d[a];return c!==void 0?c:b}function I(d,a,b){var c=d[a];return c!==void 0?c:b}
function Xb(a,b,c){return a<b?b:a>c?c:a}function $(a){switch(a){case 1:return-16711809;case 2:return-12582913;case 3:return-1;case 4:return-32961}return 0}function Cb(a){try{return a.getContext('2d')}catch(b){}return null}function qd(c){var a=c,b=a.mozRequestPointerLock||a.requestPointerLock;b&&b.call(c)}function rd(c,a){var b=null;try{b=c.getContext('webgl',a)}catch(d){}try{b||(b=c.getContext('experimental-webgl',a))}catch(e){}return b}function Db(){var a=this.performance;return a&&a.now?a.now():+new Date}function md(a){return a.orientation||0}function Eb(b){var a=b;return a.mozPointerLockElement||(a.pointerLockElement||null)}function nd(a){return a.mozMovementX|a.movementX|0}function od(a){return a.mozMovementY|a.movementY|0}function pd(c){var a=c,b=a.webkitRequestFullscreen||(a.mozRequestFullScreen||a.requestFullscreen);b&&b.call(c)}function Hd(a,b){this.a=this.b=this.c=this.d=this.e=this.f=null,this.g=H.getElementById('instructions'),this.h=this.j=this.i=this.m=this.l=this.k=null,this.o=new le,this.r=0,this.p=new fe,
this.u=new fe,this.q=new qe,this.t=new fe,this.A=this.v=this.w=this.G=this.ea=this.V=0,this.pa=!1,this.fa=this.E=this.C=0,this.a=a,this.b=new Id(a),this.c=$a(a,td,'texture.png'),this.d=$a(a,ud,'lightmap.png'),this.e=new de(a,this.b),this.f=new re(a,this.b,this.d),zb(this.f,new Md.nb(b),1),this.j=new Cd(this.f),this.h=new Dd(this.f),this.i=this.h,this.m=new $d(this.a,this)}function Ld(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f}function Md(){this.a=this.b=null,this.c=this.d=0,this.b=new Float32Array(256),this.a=new Uint8Array(this.b.buffer)}Md.nb=function(a){this.a=this.b=null,this.d=0,this.c=a.length,this.b=new Float32Array(this.c+3>>2),this.a=new Uint8Array(this.b.buffer),this.a.set(a)};Md.nb.prototype=Md.prototype;function $d(a,b){this.a=this.b=null,this.c=new fe,this.d=null,this.a=a,this.b=b,this.d=ga(a,hb,'precision highp float;uniform mat4 f,x;uniform vec4 l;attribute vec3 d;attribute vec4 k,j,t;varying float b;varying vec2 m,i;vec2 g(vec4 a){return a.xz*.996109+a.yw*.003891;}vec4 v(){vec3 a=d+k.xyz-.5;return x*f*vec4(mix(d,a,clamp(dot(l.xyz,a)-l.w,0.,1.)),1);}void main(){b=k.w,i=g(t),m=g(j),gl_Position=v();}',
'precision highp float;uniform sampler2D D,s;varying float b;varying vec2 m,i;void main(){gl_FragColor=(.05+.95*texture2D(D,m))*(b*(1.-.1*float(texture2D(s,i).x>.5)));}')}$d.prototype.Nb=function(){var a=this.a;Mc(this.c,1.0471975511965976,a.v/a.o,1,100),Ea(a,0),a.j=2,Q(a,1,0,1,0,0),Da(this.b,0,this.c,this.d)};function ae(a,b,c){this.a=this.b=null,this.c=(Fb=ub())||Ib,this.d=new fe,this.e=this.f=null,this.g=new fe,this.h=Bc,this.j=this.i=null,this.a=a,this.b=b,this.f=ga(a,gb,'precision highp float;uniform float p;attribute vec3 d;varying float b;void main(){b=d.z,gl_Position=vec4(d.x*p,d.y,0,1);}','precision highp float;varying float b;void main(){gl_FragColor=vec4(b);}'),this.j=ga(a,hb,'precision highp float;uniform mat4 f,x;uniform float p;uniform vec4 l,o,n,h,q;attribute vec3 d;attribute vec4 k,j,t;varying float b;varying vec2 m,i;vec2 g(vec4 a){return a.xz*.996109+a.yw*.003891;}vec4 v(){vec3 a=d+k.xyz-.5;return x*f*vec4(mix(d,a,clamp(dot(l.xyz,a)-l.w,0.,1.)),1);}void main(){vec4 a=v();float c=abs(a.w),y=mix(n.x,n.z,(.5+a.x/c*.5*p-q.x)/q.z),w=mix(n.w,n.y,(.5+a.y/c*.5-q.y)/q.w),e=y*y+w*w,z=1.+e*(o.x+e*(o.y+e*(o.z+e*o.w)));a.x=((y*z-h.x)/(h.z-h.x)*2.-1.)*c*p,a.y=((w*z-h.w)/(h.y-h.w)*2.-1.)*c,b=k.w,i=g(t),m=g(j),gl_Position=a;}',
'precision highp float;uniform sampler2D D,s;varying float b;varying vec2 m,i;void main(){gl_FragColor=(.05+.95*texture2D(D,m))*(b*(1.-.1*float(texture2D(s,i).x>.5)));}');var d=this.h,e=this.c,f=tb(d),g=Fc(d,e),h=Gc(d,e),j=Hc(d,e,h);j[0]=j[0]*2,j[2]=j[2]*2,ha(this.j,'o',f[0],f[1],f[2],f[3]),ha(this.j,'n',g[0],g[1],g[2],g[3]),ha(this.j,'h',h[0],h[1],h[2],h[3]),ha(this.j,'q',j[0],j[1],j[2],j[3]),wb(this.d,g[0]*1,g[2]*1,g[3]*1,g[1]*1,1,100),Oa(this.g,this.d),this.g.c=-this.g.c,this.i=function(i){var m=g[0]+(g[2]-g[0])*i.a,l=g[3]+(g[1]-g[3])*i.b,k=Math.sqrt(m*m+l*l),o=J(f,k)/k;i.a=j[0]+j[2]*(m*o-h[0])/(h[2]-h[0]),i.b=j[1]+j[3]*(l*o-h[3])/(h[1]-h[3])},this.e=la(c,gb,S(Ac(this.i)))}ae.prototype.Nb=function(){var a=this.a,b=a.v,c=a.o;Ea(a,0),qa(this.j,'p',1),W(a,0,0,b/2|0,c),a.j=2,Q(a,1,0,1,0,0),Da(this.b,1,this.d,this.j),qa(this.f,'p',1),a.j=0,Q(a,0,2,0,2,0),X(a,2,this.f,this.e,0),qa(this.j,'p',-1),W(a,b/2|0,0,(b+1|0)/2|0,c),a.j=2,Q(a,1,0,1,0,0),Da(this.b,2,this.g,this.j),qa(this.f,'p',-1),a.j=0,Q(a,0,2,0,2,0),X(a,2,
this.f,this.e,0)};function de(a,b){this.a=a,this.b=b}function fe(){this.a=1,this.b=this.c=this.d=this.e=0,this.f=1,this.g=this.h=this.j=this.i=0,this.m=1,this.l=this.k=this.o=this.r=0,this.p=1}function ge(a,b,c,d,e,f,g){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f,this.g=g}function he(a,b,c,d,e,f,g,h,j,i,m,l,k,o,r,p,u,q,t,A,v,w){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f,this.g=g,this.h=h,this.j=j,this.i=i,this.m=m,this.l=l,this.k=k,this.o=o,this.r=r,this.p=p,this.u=u,this.q=q,this.t=t,this.A=A,this.v=v,this.w=w}function ie(){this.a=[]}function je(){this.a=[],this.b=this.c=1,this.d=new Uint8Array(4)}function ke(a,b,c,d,e){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=new fe,this.g=new fe,this.h=new qe,this.j=new qe,this.i=new qe,this.m=new qe,this.l=this.k=this.o=this.r=this.p=this.u=this.q=this.t=this.A=this.v=null,this.w=0,this.G=!1}function le(){this.a=new qe,this.b=this.c=!1}function Cd(a){this.a=this.b=null,this.c=D(new qe,.5,.5,.5),this.d=this.e=this.f=this.g=this.h=this.j=this.i=this.m=this.l=this.k=0,
this.a=a,this.b=new me(a)}va=Cd.prototype;va._a=function(){return this.c};va.Ob=function(a){this.h=this.m=Math.floor(a.a)|0,this.j=this.l=Math.floor(a.b)|0,this.i=this.k=Math.floor(a.c)|0,D(this.c,this.h+.5,this.j+.5,this.i+.5)};va.Pb=function(a,b){switch(a){case 7:case 3:_(this,-this.f|0,0,-this.g|0,b);break;case 10:case 5:_(this,this.f,0,this.g,b);break;case 11:_(this,0,1,0,b);break;case 23:_(this,0,-1,0,b);break;case 25:case 6:_(this,-this.d|0,0,-this.e|0,b);break;case 29:case 4:_(this,this.d,0,this.e,b);break;case 0:oa(this,0);break;case 1:_c(this.b);break;case 2:$c(this.b);break;case 34:oa(this,1);break;case 35:oa(this,3);break;case 36:oa(this,4);break;case 37:oa(this,2);break}};va.Qb=function(a){var b=za(this.a,this.h,this.j,this.i)?-.01:.01;vb(a,Math.min(this.h,this.m)+b,Math.min(this.j,this.l)+b,Math.min(this.i,this.k)+b,(Math.max(this.h,this.m)+1|0)-b,(Math.max(this.j,this.l)+1|0)-b,(Math.max(this.i,this.k)+1|0)-b,-1)};va.Rb=function(a,b,c){this.d=this.e=this.f=this.g=0,Math.abs(b.j)>Math.abs(b.m)?b.j>0?(this.d=this.g=-1):(this.d=this.g=1):b.m>0?(this.e=-1,
this.f=1):(this.e=1,this.f=-1);var d=1-Math.pow(1e-08,c);this.c.a+=(this.h+.5-this.c.a)*d,this.c.b+=(this.j+.5-this.c.b)*d,this.c.c+=(this.i+.5-this.c.c)*d};function Dd(a){this.a=a,this.b=new Ld(.1,0,.1,.8,.8,.8),this.c=new qe,this.d=new qe,this.e=new qe,this.f=new qe,this.g=new qe,this.h=0,this.j=!1}va=Dd.prototype;va._a=function(){return D(this.c,lb(this.b),gc(this.b),mb(this.b))};va.Ob=function(a){this.b.a=a.a-this.b.d/2,this.b.b=a.b-this.b.e/2,this.b.c=a.c-this.b.f/2};va.Pb=function(a,b){};va.Qb=function(a){vb(a,this.b.a+.01,this.b.b+.01,this.b.c+.01,this.b.a+this.b.d-.01,this.b.b+this.b.e-.01,this.b.c+this.b.f-.01,-1)};va.Rb=function(a,b,c){this.j&&(D(this.d,a.a.a,0,a.a.c),a.b&&(this.d.c-=1),U(D(this.f,b.j,0,b.m)),U(D(this.g,b.a,0,b.c)),D(this.d,this.f.a*this.d.c+this.g.a*this.d.a,0,this.f.c*this.d.c+this.g.c*this.d.a)),Ta(U(Sa(this.e,this.d)),c*6),this.j&&za(this.a,Math.floor(lb(this.b))|0,(Math.floor(this.b.b)|0)-1|0,Math.floor(mb(this.b))|0)==2?(this.h=10,this.j=!1):this.h-=c*16;var d=this.b.a+this.e.a,e=this.b.b+this.h*c,f=this.b.c+this.e.c;
hc(this.b,this.a,this.e.a,this.h*c,this.e.c),this.b.a!=d&&(this.d.a=0),this.b.c!=f&&(this.d.c=0),this.b.b!=e?(this.h=-.002/c,this.j=this.h<0):this.j=!1};function me(a){this.a=a,this.b=[],this.c=[],this.d=[]}function pe(){this.a=this.b=0}function qe(){this.a=this.b=this.c=0}function re(a,b,c){this.a=a,this.b=b,this.c=c,this.d=new je,this.e=null,this.f={},this.g=[],this.h=!0}function Id(a){this.a=a,this.b=[]}function Jd(a,b){this.a=a,this.b=b,this.c=[],this.d=0}function Kd(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.e=!1}function Yd(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}function Zd(){this.a=[],this.b=0}function _d(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}function Nd(){var f=this;if(f.a=0,f.b=0,f.c=null,f.d=65537,f.e=[],f.f=!1,f.g=null,f.h=[0,0,0,0],f.j=2,f.i=null,f.m=!0,f.l=1,f.k=null,f.o=0,f.r=null,f.p=0,f.u=65537,f.q=0,f.t=null,f.A=[0,0,0,0],f.v=0,f.w=null,f.k=rd(H.createElement('canvas'),{alpha:!1,antialias:!1,preserveDrawingBuffer:!1,stencil:!1}),!f.k)throw new Error('Could not initialize WebGL');
var a=function(){return f.k.getExtension('OES_standard_derivatives')},b=f.k.canvas,c=b.style;b.width=b.height=0,c.display='block',c.left=c.top='0',c.width=c.height='100%',z(b,'webglcontextlost',function(d){ca(d)}),z(b,'webglcontextrestored',function(){a(),f.a=0,f.f=!1,f.m=!0,f.l=f.l+1|0;for(var g=0,h=f.e,j=h.length;g<j;g=g+1|0){var e=h[g];e()}}),f.c={0:0,1:1,2:768,3:774,4:769,5:775,6:770,7:772,8:771,9:773,10:32769,11:32770},f.i={0:9728,1:9729,2:9987},a(),f.w=new Wd(f,zc,1,1,new Uint8Array(4))}function Od(a,b){this.a=a,this.b=b,this.c=0,this.d=null,this.e=!0}function Pd(a,b){Od.call(this,a,b),this.f=0}Fd(Pd,Od);Pd.prototype.Mb=function(){var a=this.a.a;(this.c^a.l||this.e)&&(a.k.uniform1f(na(this),this.f),this.e=!1)};function Qd(a,b){Od.call(this,a,b),this.g=this.h=this.j=0}Fd(Qd,Od);Qd.prototype.Mb=function(){var a=this.a.a;(this.c^a.l||this.e)&&(a.k.uniform3f(na(this),this.g,this.h,this.j),this.e=!1)};function Rd(a,b){Od.call(this,a,b),this.i=this.m=this.l=this.k=0}Fd(Rd,Od);Rd.prototype.Mb=function(){var a=this.a.a;
(this.c^a.l||this.e)&&(a.k.uniform4f(na(this),this.i,this.m,this.l,this.k),this.e=!1)};function Sd(a,b){Od.call(this,a,b),this.o=new fe}Fd(Sd,Od);Sd.prototype.Mb=function(){var a=this.a.a,b=this.o;(this.c^a.l||this.e)&&(L[0]=b.a,L[1]=b.e,L[2]=b.j,L[3]=b.k,L[4]=b.b,L[5]=b.f,L[6]=b.i,L[7]=b.o,L[8]=b.c,L[9]=b.g,L[10]=b.m,L[11]=b.r,L[12]=b.d,L[13]=b.h,L[14]=b.l,L[15]=b.p,a.k.uniformMatrix4fv(na(this),!1,L),this.e=!1)};function Td(a,b){Od.call(this,a,b),this.r=null,this.p=-1}Fd(Td,Od);Td.prototype.Mb=function(){var a=this.a.a,b=this.r,c=a.k;b||(b=a.w),(this.c^a.l||this.e)&&(c.uniform1i(na(this),this.p),this.e=!1),c.activeTexture(33984+this.p|0),c.bindTexture(3553,sb(b))};function Ud(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.e=Hb(null),this.f=[],this.g=0,this.h=null}function Vd(a,b){this.b=0,this.c=this.d=null,this.e=!0,this.f=2147483647,this.g=0,this.h=2147483647,this.j=0,this.a=a,this.i=b,this.d=new Uint8Array(b)}function Wd(a,b,c,d,e){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=this.g=null,this.h=0,
this.j=this.i=!0}function Xd(a,b,c){this.a=a,this.b=b,this.c=c,this.d=null,this.e=0,this.f=!0,this.g=[0,0,0,0]}function be(a,b,c,d,e){this.a=null,this.b=a,this.c=b,this.d=c,this.e=d,this.f=e}function ce(a,b,c){this.a=a,this.b=b,this.c=c}function ne(a,b,c,d,e){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e}function oe(a){this.a=a}function se(a,b,c){this.a=a,this.b=b,this.c=c,this.d=new Uint8Array(512),this.e=new ie,this.f=0,this.g=this.h=null}var Fb,Xa=this.window,H=this.document,gb=K(new Zd,'d',0,3),_b=K(K(K(K(new Zd,'d',0,3),'B',0,3),'j',1,4),'C',1,4),hb=K(K(K(K(new Zd,'d',0,3),'t',1,4),'j',1,4),'k',1,4),sd=new _d(2,0,0,1),td=new _d(0,1,1,0),ud=new _d(1,1,1,1),zc=new _d(1,0,0,1),L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Bc=new be(.0393,.0639,[60,60,60,60],.035,[.33582565,.5534879]),vd=new ce(.11,.062,.004),wd=new ce(.133,.074,.004),xd=new ce(.121,.068,.003),yd=new ce(.075,.05,.0045),zd=new ce(.089,.05,.0045),Ib=new ce(.104,.058,.005),Ad=new ce(.112,.068,.005),P=new Md,Bd=new fe,Y=new fe,Ed=new qe;ee()})();
